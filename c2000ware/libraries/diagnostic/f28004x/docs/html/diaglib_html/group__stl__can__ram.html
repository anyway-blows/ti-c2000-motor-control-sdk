<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CAN Message RAM Test API Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="$relpath/search.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CAN Message RAM Test API Functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gad64987788c1dd4da921ff20d9bc0c3d6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__can__ram.html#gad64987788c1dd4da921ff20d9bc0c3d6">STL_CAN_RAM_PASS</a>&#160;&#160;&#160;0U</td></tr>
<tr class="separator:gad64987788c1dd4da921ff20d9bc0c3d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6c29ed0b7445c7d17bc9c16251b6666"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__can__ram.html#gaa6c29ed0b7445c7d17bc9c16251b6666">STL_CAN_RAM_ERROR</a>&#160;&#160;&#160;1U</td></tr>
<tr class="separator:gaa6c29ed0b7445c7d17bc9c16251b6666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1231e3a3b1f9d0cb358581180342faf2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__can__ram.html#ga1231e3a3b1f9d0cb358581180342faf2">STL_CAN_RAM_ADDR_OFFSET</a>&#160;&#160;&#160;0x1000U</td></tr>
<tr class="separator:ga1231e3a3b1f9d0cb358581180342faf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d6ddbb80596e3b329f56d3674ccf319"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__can__ram.html#ga6d6ddbb80596e3b329f56d3674ccf319">STL_CAN_RAM_MAX_ADDR_OFFSET</a>&#160;&#160;&#160;0x13F1U</td></tr>
<tr class="separator:ga6d6ddbb80596e3b329f56d3674ccf319"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga579b1ce84edf96fe901459b96f9a1965"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__can__ram.html#ga579b1ce84edf96fe901459b96f9a1965">STL_CAN_RAM_PARITY_OFF</a>&#160;&#160;&#160;(5U &lt;&lt; CAN_CTL_PMD_S)</td></tr>
<tr class="separator:ga579b1ce84edf96fe901459b96f9a1965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76de364f70a5ef17344f3c847f392af1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__can__ram.html#ga76de364f70a5ef17344f3c847f392af1">STL_CAN_RAM_NO_COPY</a>&#160;&#160;&#160;0xFFFFFFFFU</td></tr>
<tr class="separator:ga76de364f70a5ef17344f3c847f392af1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga55ba883f4fbc554467e659d5e600316c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__can__ram.html#ga55ba883f4fbc554467e659d5e600316c">STL_CAN_RAM_testRAM</a> (const uint32_t canBase, const <a class="el" href="group__stl__march.html#ga70899b03ea106698038cd5335b88a91a">STL_March_Pattern</a> pattern, const uint32_t startAddress, const uint32_t endAddress, const uint32_t copyAddress)</td></tr>
<tr class="memdesc:ga55ba883f4fbc554467e659d5e600316c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a March13N memory test on the specified range of CAN message RAM objects.  <a href="#ga55ba883f4fbc554467e659d5e600316c">More...</a><br/></td></tr>
<tr class="separator:ga55ba883f4fbc554467e659d5e600316c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8287926fbff23877d30164710fbf5c1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__can__ram.html#ga8287926fbff23877d30164710fbf5c1e">STL_CAN_RAM_injectError</a> (const uint32_t canBase, const uint32_t address, const uint32_t xorMask)</td></tr>
<tr class="memdesc:ga8287926fbff23877d30164710fbf5c1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Injects an error into a CAN message RAM address.  <a href="#ga8287926fbff23877d30164710fbf5c1e">More...</a><br/></td></tr>
<tr class="separator:ga8287926fbff23877d30164710fbf5c1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5044c429894ecd3759b20c5e40585427"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__can__ram.html#ga5044c429894ecd3759b20c5e40585427">STL_CAN_RAM_checkErrorStatus</a> (const uint32_t canBase)</td></tr>
<tr class="memdesc:ga5044c429894ecd3759b20c5e40585427"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the status of the CAN message RAM parity error detected bit.  <a href="#ga5044c429894ecd3759b20c5e40585427">More...</a><br/></td></tr>
<tr class="separator:ga5044c429894ecd3759b20c5e40585427"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The code for this module is contained in <code>source/stl_can_ram.c</code> and <code>source/stl_can_ram_s.asm</code>, with <code><a class="el" href="stl__can__ram_8h.html">include/stl_can_ram.h</a></code> containing the API declarations for use by applications.</p>
<h1>Error Injection</h1>
<p>Here are techniques to inject error:</p>
<p><b><a class="el" href="group__stl__can__ram.html#ga55ba883f4fbc554467e659d5e600316c" title="Performs a March13N memory test on the specified range of CAN message RAM objects. ">STL_CAN_RAM_testRAM()</a></b>, <a class="el" href="group__stl__can__ram.html#ga5044c429894ecd3759b20c5e40585427" title="Returns the status of the CAN message RAM parity error detected bit. ">STL_CAN_RAM_checkErrorStatus()</a></p>
<ul>
<li>Call <a class="el" href="group__stl__can__ram.html#ga8287926fbff23877d30164710fbf5c1e" title="Injects an error into a CAN message RAM address. ">STL_CAN_RAM_injectError()</a> with an <em>xorMask</em> value that will cause errors. </li>
</ul>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gad64987788c1dd4da921ff20d9bc0c3d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STL_CAN_RAM_PASS&#160;&#160;&#160;0U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gaa6c29ed0b7445c7d17bc9c16251b6666"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STL_CAN_RAM_ERROR&#160;&#160;&#160;1U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga1231e3a3b1f9d0cb358581180342faf2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STL_CAN_RAM_ADDR_OFFSET&#160;&#160;&#160;0x1000U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga6d6ddbb80596e3b329f56d3674ccf319"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STL_CAN_RAM_MAX_ADDR_OFFSET&#160;&#160;&#160;0x13F1U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga579b1ce84edf96fe901459b96f9a1965"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STL_CAN_RAM_PARITY_OFF&#160;&#160;&#160;(5U &lt;&lt; CAN_CTL_PMD_S)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga76de364f70a5ef17344f3c847f392af1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STL_CAN_RAM_NO_COPY&#160;&#160;&#160;0xFFFFFFFFU</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Value to indicate to <a class="el" href="group__stl__can__ram.html#ga55ba883f4fbc554467e659d5e600316c" title="Performs a March13N memory test on the specified range of CAN message RAM objects. ">STL_CAN_RAM_testRAM()</a> through the <b>copyAddress</b> parameter that the test should run a destructive test on the region of CAN message RAM without saving and restoring its contents. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga55ba883f4fbc554467e659d5e600316c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void STL_CAN_RAM_testRAM </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>canBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__stl__march.html#ga70899b03ea106698038cd5335b88a91a">STL_March_Pattern</a>&#160;</td>
          <td class="paramname"><em>pattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>startAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>endAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>copyAddress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a March13N memory test on the specified range of CAN message RAM objects. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">canBase</td><td>is the base address of the CAN controller. </td></tr>
    <tr><td class="paramname">pattern</td><td>is the test pattern to use. </td></tr>
    <tr><td class="paramname">startAddress</td><td>is the starting address (inclusive) of the CAN message RAM range to test. </td></tr>
    <tr><td class="paramname">endAddress</td><td>is the end address (inclusive) of the CAN message RAM range to test. </td></tr>
    <tr><td class="paramname">copyAddress</td><td>is the address to copy the original contents of the memory under test. It will be used to restore the original memory at the end of the March13N memory test. If no save and restore is required, use a value of <b>STL_CAN_RAM_NO_COPY</b>.</td></tr>
  </table>
  </dd>
</dl>
<p>This function performs a March13N memory test on the range of CAN message RAM objects specified by <b>canBase</b>, <b>startAddress</b> and <b>endAddress</b>. The test can save and restore the original contents of the message RAM by passing an address to a back up buffer through the <b>copyAddress</b> parameter. The test will copy the original contents of the memory to <b>copyAddress</b>, perform the memory test, and then copy the original contents back to the memory under test. To skip the save and restore, use a value of <b>STL_CAN_RAM_NO_COPY</b> for the <b>copyAddress</b> and a destructive test will be performed instead.</p>
<p>The test patterns and the March13N memory test algorithm provided test the memory for stuck-at-faults. The parity bits will show if any were detected. Use <a class="el" href="group__stl__can__ram.html#ga5044c429894ecd3759b20c5e40585427" title="Returns the status of the CAN message RAM parity error detected bit. ">STL_CAN_RAM_checkErrorStatus()</a> to read the parity status.</p>
<dl class="section note"><dt>Note</dt><dd>Note to take care calculating the size of memory needed for <b>copyAddress</b>. The March13N function is not specific to the CAN message RAM and does not take the byte addressability of the memory into account. Use a buffer twice the size of the actual message RAM region you are testing.</dd>
<dd>
The STL_March functions called by this test disable global CPU interrupts (DINT) and then re-enable them after the test has completed.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8287926fbff23877d30164710fbf5c1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void STL_CAN_RAM_injectError </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>canBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>xorMask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Injects an error into a CAN message RAM address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">canBase</td><td>is the base address of the CAN controller. </td></tr>
    <tr><td class="paramname">address</td><td>is the address of the word in the message RAM where the error will be injected. </td></tr>
    <tr><td class="paramname">xorMask</td><td>mask of the bit to flip in <b>address</b>.</td></tr>
  </table>
  </dd>
</dl>
<p>This function injects an error at a specific memory <b>address</b>. <b>xorMask</b> specifies which bit to flip in order to corrupt the data or parity bits.</p>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5044c429894ecd3759b20c5e40585427"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t STL_CAN_RAM_checkErrorStatus </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>canBase</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the status of the CAN message RAM parity error detected bit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">canBase</td><td>is the base address of the CAN controller.</td></tr>
  </table>
  </dd>
</dl>
<p>This function checks if any parity errors have been detected by the CAN message RAM parity logic.</p>
<dl class="section return"><dt>Returns</dt><dd>If the CAN error status register indicates a parity error the function returns <b>STL_CAN_RAM_ERROR</b>. Otherwise, the function returns <b>STL_CAN_RAM_PASS</b>.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Several bits in the CAN error status register (CAN_ES) are cleared on a CPU read of the register which this function performs. If the potential clearing of these bits (see device Technical Reference Manual for details) is undesired behavior for your application, use different means of reading the status. </dd></dl>

</div>
</div>
</div><!-- contents -->
<hr size="1" /><small>
Copyright  2021, Texas Instruments Incorporated</small>
</body>
</html>
