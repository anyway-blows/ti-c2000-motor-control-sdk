<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CPU Register API Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="$relpath/search.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">CPU Register API Functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gade757029db2c6d98d3ebbf5ec95a71a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__cpu__reg.html#gade757029db2c6d98d3ebbf5ec95a71a2">STL_CPU_REG_PASS</a>&#160;&#160;&#160;0x0U</td></tr>
<tr class="separator:gade757029db2c6d98d3ebbf5ec95a71a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5bd849a4dde658c980d714ca93dff356"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__cpu__reg.html#ga5bd849a4dde658c980d714ca93dff356">STL_CPU_REG_FAIL</a>&#160;&#160;&#160;0x1U</td></tr>
<tr class="separator:ga5bd849a4dde658c980d714ca93dff356"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7b60fb1e28bea41cf09c1f163f712499"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__cpu__reg.html#ga7b60fb1e28bea41cf09c1f163f712499">STL_CPU_REG_testCPURegisters</a> (bool injectError)</td></tr>
<tr class="separator:ga7b60fb1e28bea41cf09c1f163f712499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae74c783a8c0fa2eb5e2262891d57672c"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__cpu__reg.html#gae74c783a8c0fa2eb5e2262891d57672c">STL_CPU_REG_testFPURegisters</a> (bool injectError)</td></tr>
<tr class="separator:gae74c783a8c0fa2eb5e2262891d57672c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga264259c89dc84d68b9c2e30693aa4381"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__cpu__reg.html#ga264259c89dc84d68b9c2e30693aa4381">STL_CPU_REG_testVCURegisters</a> (uint32_t *scratchRAM, bool injectError)</td></tr>
<tr class="separator:ga264259c89dc84d68b9c2e30693aa4381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3c3de838714215d3f48ae01736fd81bd"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__cpu__reg.html#ga3c3de838714215d3f48ae01736fd81bd">STL_CPU_REG_checkCPURegisters</a> (bool injectError)</td></tr>
<tr class="memdesc:ga3c3de838714215d3f48ae01736fd81bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests CPU registers.  <a href="#ga3c3de838714215d3f48ae01736fd81bd">More...</a><br/></td></tr>
<tr class="separator:ga3c3de838714215d3f48ae01736fd81bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8dd79bc3e76b2f90ce842fb2fbf8431e"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__cpu__reg.html#ga8dd79bc3e76b2f90ce842fb2fbf8431e">STL_CPU_REG_checkFPURegisters</a> (bool injectError)</td></tr>
<tr class="memdesc:ga8dd79bc3e76b2f90ce842fb2fbf8431e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests FPU registers.  <a href="#ga8dd79bc3e76b2f90ce842fb2fbf8431e">More...</a><br/></td></tr>
<tr class="separator:ga8dd79bc3e76b2f90ce842fb2fbf8431e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a9e1cdf452862c3d049f7108cd38cbb"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stl__cpu__reg.html#ga9a9e1cdf452862c3d049f7108cd38cbb">STL_CPU_REG_checkVCURegisters</a> (bool injectError)</td></tr>
<tr class="memdesc:ga9a9e1cdf452862c3d049f7108cd38cbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests VCU registers.  <a href="#ga9a9e1cdf452862c3d049f7108cd38cbb">More...</a><br/></td></tr>
<tr class="separator:ga9a9e1cdf452862c3d049f7108cd38cbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The code for this module is contained in <code>source/stl_cpu_reg.c</code> and <code>source/stl_cpu_reg_s.asm</code>, with <code><a class="el" href="stl__cpu__reg_8h.html">include/stl_cpu_reg.h</a></code> containing the API declarations for use by applications.</p>
<h1>Error Injection</h1>
<p>The functions in this module all have an <em>injectError</em> parameter that when set to true, will overwrite an incorrect test pattern to a register instead of the expected pattern in order to generate a failure. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gade757029db2c6d98d3ebbf5ec95a71a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STL_CPU_REG_PASS&#160;&#160;&#160;0x0U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__stl__cpu__reg.html#ga3c3de838714215d3f48ae01736fd81bd">STL_CPU_REG_checkCPURegisters()</a>, <a class="el" href="group__stl__cpu__reg.html#ga8dd79bc3e76b2f90ce842fb2fbf8431e">STL_CPU_REG_checkFPURegisters()</a>, and <a class="el" href="group__stl__cpu__reg.html#ga9a9e1cdf452862c3d049f7108cd38cbb">STL_CPU_REG_checkVCURegisters()</a>.</p>

</div>
</div>
<a class="anchor" id="ga5bd849a4dde658c980d714ca93dff356"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STL_CPU_REG_FAIL&#160;&#160;&#160;0x1U</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga7b60fb1e28bea41cf09c1f163f712499"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t STL_CPU_REG_testCPURegisters </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>injectError</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__stl__cpu__reg.html#ga3c3de838714215d3f48ae01736fd81bd">STL_CPU_REG_checkCPURegisters()</a>.</p>

</div>
</div>
<a class="anchor" id="gae74c783a8c0fa2eb5e2262891d57672c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t STL_CPU_REG_testFPURegisters </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>injectError</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__stl__cpu__reg.html#ga8dd79bc3e76b2f90ce842fb2fbf8431e">STL_CPU_REG_checkFPURegisters()</a>.</p>

</div>
</div>
<a class="anchor" id="ga264259c89dc84d68b9c2e30693aa4381"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t STL_CPU_REG_testVCURegisters </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>scratchRAM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>injectError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="group__stl__cpu__reg.html#ga9a9e1cdf452862c3d049f7108cd38cbb">STL_CPU_REG_checkVCURegisters()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3c3de838714215d3f48ae01736fd81bd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t STL_CPU_REG_checkCPURegisters </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>injectError</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tests CPU registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">injectError</td><td>when <em>false</em> the test writes the test pattern to the registers as expected. When <em>true</em>, the test will write an unexpected error pattern to ACC to simulate a stuck bit, causing the test to fail.</td></tr>
  </table>
  </dd>
</dl>
<p>This function tests CPU core registers for stuck bits. The following registers are tested:</p>
<ul>
<li>ACC</li>
<li>P</li>
<li>XAR0 to XAR7</li>
<li>XT</li>
<li>SP</li>
<li>IFR, IER and DBGIER</li>
<li>ST0</li>
<li>ST1 (excluding IDLESTAT and LOOP bits)</li>
<li>DP</li>
</ul>
<p>The values of ST0, ST1, DP, IER, IFR, and DBGIER and the save-on-entry XAR registers, as defined by the compiler calling convention, are saved and restored in this test.</p>
<p>Note that the IDLESTAT and LOOP bits of ST1 are not tested by this function as they are read-only. IDLESTAT is set when the IDLE instruction is used to enter a low-power mode. Performing a functional test of the low-power mode will indirectly serve as a test of IDLESTAT.</p>
<p>The LOOP bit is set by the LOOPZ and LOOPNZ instructions. The C2000 compiler will not generate code that uses these instructions. If an application contains hand-coded assembly that uses them, the LOOP bit may also be tested by performing a functional test of the applicable LOOP instruction.</p>
<dl class="section note"><dt>Note</dt><dd>You should disable interrupts before calling this test.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>If the test passes, the routine returns <b>STL_CPU_REG_PASS</b>. Otherwise, it returns <b>STL_CPU_REG_FAIL</b>. </dd></dl>

<p>References <a class="el" href="group__stl__cpu__reg.html#gade757029db2c6d98d3ebbf5ec95a71a2">STL_CPU_REG_PASS</a>, <a class="el" href="group__stl__cpu__reg.html#ga7b60fb1e28bea41cf09c1f163f712499">STL_CPU_REG_testCPURegisters()</a>, <a class="el" href="group__stl__util.html#gga5616669216982377268bcd646a3c6a50a161eaa005f6fdae927fd424f9c78c0cf">STL_UTIL_CPU_REG</a>, and <a class="el" href="group__stl__util.html#ga3fb639a824e3d9be02aed80da16af11a">STL_Util_setErrorFlag()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8dd79bc3e76b2f90ce842fb2fbf8431e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t STL_CPU_REG_checkFPURegisters </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>injectError</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tests FPU registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">injectError</td><td>when <em>false</em> the test writes the test pattern to the registers as expected. When <em>true</em>, the test will write an unexpected error pattern to R5H to simulate a stuck bit, causing the test to fail.</td></tr>
  </table>
  </dd>
</dl>
<p>This function tests FPU registers for stuck bits. The following registers are tested:</p>
<ul>
<li>R0H to R7H</li>
<li>RND32, TF, ZI, NI, ZF, NF bits of STF register.</li>
<li>Shadow registers for R0H to R7H and STF</li>
</ul>
<p>The values of STF and the save-on-entry RnH registers, as defined by the compiler calling convention, are saved and restored in this test.</p>
<dl class="section note"><dt>Note</dt><dd>You should disable interrupts before calling this test.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>If the test passes, the routine returns <b>STL_CPU_REG_PASS</b>. Otherwise, it returns <b>STL_CPU_REG_FAIL</b>. </dd></dl>

<p>References <a class="el" href="group__stl__cpu__reg.html#gade757029db2c6d98d3ebbf5ec95a71a2">STL_CPU_REG_PASS</a>, <a class="el" href="group__stl__cpu__reg.html#gae74c783a8c0fa2eb5e2262891d57672c">STL_CPU_REG_testFPURegisters()</a>, <a class="el" href="group__stl__util.html#gga5616669216982377268bcd646a3c6a50a18dc461f86d7876ad7c13788308b3ce9">STL_UTIL_FPU_REG</a>, and <a class="el" href="group__stl__util.html#ga3fb639a824e3d9be02aed80da16af11a">STL_Util_setErrorFlag()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9a9e1cdf452862c3d049f7108cd38cbb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t STL_CPU_REG_checkVCURegisters </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>injectError</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tests VCU registers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">injectError</td><td>when <em>false</em> the test writes the test pattern to the registers as expected. When <em>true</em>, the test will write an unexpected error pattern to VR4 to simulate a stuck bit, causing the test to fail.</td></tr>
  </table>
  </dd>
</dl>
<p>This function tests VCU (Viterbi, Complex Math and CRC Unit) registers for stuck bits. The following registers are tested:</p>
<ul>
<li>VR0 to VR8</li>
<li>VT0 and VT1</li>
<li>VCRC</li>
<li>VSTATUS</li>
</ul>
<p>The value of VSTATUS saved and restored in this test.</p>
<dl class="section note"><dt>Note</dt><dd>You should disable interrupts before calling this test.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>If the test passes, the routine returns <b>STL_CPU_REG_PASS</b>. Otherwise, it returns <b>STL_CPU_REG_FAIL</b>. </dd></dl>

<p>References <a class="el" href="group__stl__cpu__reg.html#gade757029db2c6d98d3ebbf5ec95a71a2">STL_CPU_REG_PASS</a>, <a class="el" href="group__stl__cpu__reg.html#ga264259c89dc84d68b9c2e30693aa4381">STL_CPU_REG_testVCURegisters()</a>, <a class="el" href="group__stl__util.html#ga3fb639a824e3d9be02aed80da16af11a">STL_Util_setErrorFlag()</a>, and <a class="el" href="group__stl__util.html#gga5616669216982377268bcd646a3c6a50a07c204032f278e7907318d41368106ce">STL_UTIL_VCU_REG</a>.</p>

</div>
</div>
</div><!-- contents -->
<hr size="1" /><small>
Copyright  2021, Texas Instruments Incorporated</small>
</body>
</html>
