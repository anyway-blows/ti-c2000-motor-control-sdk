<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>fcl_foc_cpu_dm.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="$relpath/search.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<table width="100%">
<tr>
  <td bgcolor="black" width="1"><a href="http://www.ti.com"><img border="0" src="tilogo.gif" /></a></td>
  <td bgcolor="red"><img src="titagline.gif" /></td>
</tr>
</table>
<!-- Generated by Doxygen 1.8.17 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_e2f65f0987fc7d7c3308c2de75e4340e.html">a0221122</a></li><li class="navelem"><a class="el" href="dir_0681ef8c442862ab8110da736314e76a.html">repos</a></li><li class="navelem"><a class="el" href="dir_9223e2df964861cb7f2ebda010816b0a.html">mcsdk</a></li><li class="navelem"><a class="el" href="dir_a39221ee85e083c0c4598ff06ef1f27c.html">mw</a></li><li class="navelem"><a class="el" href="dir_5b7e49ee5df3bfd5b08d650634d7ab3a.html">libraries</a></li><li class="navelem"><a class="el" href="dir_1a1f7c0edddd87315b4be924ec593171.html">fcl</a></li><li class="navelem"><a class="el" href="dir_00fdbf1b4ed90d33fde95674f2c6fa46.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">fcl_foc_cpu_dm.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="fcl__foc__cpu__dm_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//#############################################################################</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// FILE:   fcl_foc_cpu.h</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// TITLE:  Header file to be shared between example and library for CPU data.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  Group:         C2000</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// Target Family:  F2837x/F2838x/F28004x/F28002x</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//#############################################################################</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// $TI Release:  $</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// $Release Date:  $</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// $Copyright:  $</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//#############################################################################</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef FCL_FOC_CPU_H</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define FCL_FOC_CPU_H</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// Include project specific include files.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="math_8h.html">math.h</a>&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;stdbool.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;stdint.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#ifndef F2838x_DEVICE</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;F28x_Project.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;f28x_project.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="device_8h.html">device.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="f28x__bmsk_8h.html">f28x_bmsk.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;fcl_enum.h&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fcl__cmplx__ctrl_8h.html">fcl_cmplx_ctrl.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qep__defs_8h.html">qep_defs.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//===============================================</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// peripheral headers used in library</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;epwm.h&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;eqep.h&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;rampgen.h&quot;</span>            <span class="comment">// Include header for the RAMPGEN object</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;rmp_cntl.h&quot;</span>           <span class="comment">// Include header for the RMPCNTL object</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ipark_8h.html">ipark.h</a>&quot;</span>              <span class="comment">// Include header for the IPARK object</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="clarke_8h.html">clarke.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="park_8h.html">park.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;speed_fr.h&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="svgen_8h.html">svgen.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pi_8h.html">pi.h</a>&quot;</span>                 <span class="comment">// Include header for the PI  object</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;pid_grando.h&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="speed__observer_8h.html">speed_observer.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">// DCL Library header files</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;DCLF32.h&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#if(SPD_CNTLR == SPD_NLPID_CNTLR)</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;DCL_NLPID.h&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;dual_axis_servo_drive_settings.h&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;dual_axis_servo_drive_user.h&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;dual_axis_servo_drive_hal.h&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#ifndef PI</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a598a3330b3c21701223ee0ca14316eca">   68</a></span>&#160;<span class="preprocessor">#define PI 3.14159265358979</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a94df81665af7e733c1963de69aec359c">   71</a></span>&#160;<span class="preprocessor">#define BITFIELD_MODE       0</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a51d03918240f5ac0a5bbe8f3422b800d">   72</a></span>&#160;<span class="preprocessor">#define DRIVERLIB_MODE      1</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a7bcb677e72824b9961abcb25f4fbe663">   74</a></span>&#160;<span class="preprocessor">#define DRIVER_MODULE       DRIVERLIB_MODE  //  BITFIELD_MODE       //</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">// typedefs</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___f_c_l___parameters__t__.html">_FCL_Parameters_t_</a></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a3b1a8649487934f56651a9fc7f19cd73">carrierMid</a>;     <span class="comment">// Mid point value of carrier count</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a3f25a6f1fe14f1a89dcbd1f9f6e34e15">adcPPBScale</a>;    <span class="comment">// ADC conversion scale to pu</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="struct___f_c_l___parameters__t__.html#a03693ee60867b71719756e8ddf49eeb2">   86</a></span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a03693ee60867b71719756e8ddf49eeb2">adcAlphaScale</a>;  <span class="comment">// ADC conversion scale to pu</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct___f_c_l___parameters__t__.html#a3fd06a843ab41dc62e2cdc5ff1872700">   87</a></span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a3fd06a843ab41dc62e2cdc5ff1872700">adcBetaScale</a>;    <span class="comment">// ADC conversion scale to pu</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#aa27a417ba1e5539be140cc8228d0746d">cmidsqrt3</a>;      <span class="comment">// internal variable</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#afc9095bc2190f53c771e448b8658e225">tSamp</a>;          <span class="comment">// sampling time</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#ad11bfc14e582ae2107e0d789652e1553">Rd</a>;             <span class="comment">// Motor resistance in D axis</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#ab5e498cff88581c624db21c5b5b2b74a">Rq</a>;             <span class="comment">// Motor resistance in Q axis</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#aad55bad7a1dd50005a02c9724622d638">Ld</a>;             <span class="comment">// Motor inductance in D axis</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#af3a94a02edbb3108be96434c09c94dd4">Lq</a>;             <span class="comment">// Motor inductance in Q axis</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a4ebc42f0f741901dd1315de252656f72">Vbase</a>;          <span class="comment">// Base voltage for the controller</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a553ac6dd18a720e676d506fd21165768">Ibase</a>;          <span class="comment">// Base current for the controller</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a6dab22e86090b6ddc3c3b86f31a01e84">invZbase</a>;       <span class="comment">// Inverter Base voltage for the controller</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a33ba8fcb5a8db4e28a7a2bb12eb957f4">wccD</a>;           <span class="comment">// D axis current controller bandwidth</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#aa921fb7b4b243bc292bc65915f2f93cc">wccQ</a>;           <span class="comment">// Q axis current controller bandwidth</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#af9770f40b8e0f6f19b1be33f8c585c74">Vdcbus</a>;         <span class="comment">// DC bus voltage</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a166cea21f53a830f598629a3b2df53e4">BemfK</a>;          <span class="comment">// Motor Bemf constant</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>   <a class="code" href="struct___f_c_l___parameters__t__.html#a0e84e0d1af6515d3d87fc31d8f604f67">Wbase</a>;          <span class="comment">// Controller base frequency (Motor) in rad/sec</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;} <a class="code" href="fcl__foc__cpu__dm_8h.html#a1af1c7b0a66974349d6fd944de88071d">FCL_Parameters_t</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a85d85cf614b96cfa53c979553d9127da">  105</a></span>&#160;<span class="preprocessor">#define FCL_PARS_DEFAULTS {                                                    \</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* carrierMid */</span><span class="preprocessor">                                                        \</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* adcScale */</span><span class="preprocessor">                                                          \</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* cmidsqrt3 */</span><span class="preprocessor">                                                         \</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* tSamp */</span><span class="preprocessor">                                                             \</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* Rd */</span><span class="preprocessor">                                                                \</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* Rq */</span><span class="preprocessor">                                                                \</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* Ld */</span><span class="preprocessor">                                                                \</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* Lq */</span><span class="preprocessor">                                                                \</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* Vbase */</span><span class="preprocessor">                                                             \</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* Ibase */</span><span class="preprocessor">                                                             \</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* wccD */</span><span class="preprocessor">                                                              \</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* wccQ */</span><span class="preprocessor">                                                              \</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* Vdcbus */</span><span class="preprocessor">                                                            \</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">    0, </span><span class="comment">/* BemfK */</span><span class="preprocessor">                                                             \</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">    0  </span><span class="comment">/* Wbase */</span><span class="preprocessor">                                                             \</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">}</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___m_o_t_o_r___vars__t__.html">_MOTOR_Vars_t_</a></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#afcdef15cac71d20db8eff8e3999cfb9c">posCntr</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a1b6faf8ea1d38d053653635a8a9ddb92">posCntrMax</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a351feb2cc07281068c91ec4c47abbcac">posSlewRate</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a7efa7ba2c8b37ffd7aecb1c92bc3b8ab">baseFreq</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a892cb7440364883a362f3298881f3183">polePairs</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#aafc2f2eac6c8172a86c264561631accd">posMechScaler</a>;        <span class="comment">// Parameter: 0.9999/total count</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a60908feec0afee75bc323fa95447f14d">Ts</a>;                   <span class="comment">// Samping period (sec)</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#af303e661a1e9246a8c94cf47a5978f28">maxModIndex</a>;          <span class="comment">// Maximum module index</span></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#ad3bd0868e8bfd236c89b6f4bef429f64">  138</a></span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ad3bd0868e8bfd236c89b6f4bef429f64">pwmHalfPeriod</a>;        <span class="comment">// Maximum module index</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a05e077d39b593c697c7b257bce2a03ba">voltageLimit</a>;         <span class="comment">// limit voltage</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a29ab66c4f667dcd4f0b6403cb1585045">currentLimit</a>;         <span class="comment">// limit current</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5aa830b8ba2bcfeea4f906313dd65ae6">speedRefStart</a>;        <span class="comment">// startup reference speed</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a66ad035fb71ff831921535772af75857">speedRefMax</a>;          <span class="comment">// maximum reference speed</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a8b1595b6e4f862e27822774b316a5c95">IdRefSet</a>;             <span class="comment">// Id reference setting (pu)</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#afe5bac8e042970eedf4e36f4f657e2aa">IqRefSet</a>;             <span class="comment">// Iq reference setting (pu)</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa134983f192e14a9b23e46c1790ed516">IdRef_start</a>;          <span class="comment">// Id reference (pu) for startup</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ab7206638dbdb9b9014125a282deb5093">IdRef_run</a>;            <span class="comment">// Id reference (pu) for running</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#af7bbc238ee8df4b479510fa34b9e46f8">IqRef_start</a>;          <span class="comment">// Iq reference (pu) for startup</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0e63b6fe1f12e07317335563b65a4da5">IdRef</a>;                <span class="comment">// Id reference (pu)</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a9698b2d968e1d75514acfdad8937d271">IqRef</a>;                <span class="comment">// Iq reference (pu)</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a833b27c5ffcbb7c79db73afb133a48ae">ctrlIdRef</a>;            <span class="comment">// control Id reference (pu)</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a7f27971e5dc5150d160de702cdcec7bc">ctrlIqRef</a>;            <span class="comment">// control Iq reference (pu)</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ddf05471bb547490b420d38f408d276">speedRef</a>;             <span class="comment">// For Closed Loop tests</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0129d68b3e3fe7e66f784cd8753286d9">positionRef</a>;          <span class="comment">// For Position Loop tests</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6d2637bcc268b11a455a0084244b24c5">lsw1Speed</a>;            <span class="comment">// initial force rotation speed in search</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                    <span class="comment">// of QEP index pulse</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ae0c718f2a95b544d8ac4afa395746051">offset_currentAs</a>;     <span class="comment">// offset in current A fbk channel</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a968d29bafa7f51ff257e03b0f26ff8c5">offset_currentBs</a>;     <span class="comment">// offset in current B fbk channel</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ad6e32f9c21d7d0e76592b42909947450">offset_currentCs</a>;     <span class="comment">// offset in current C fbk channel</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a262047d93094a29f2a0d6dd6187c753c">currentAs</a>;            <span class="comment">// phase A</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#aff655645d1a624bdf6b49c2a79f4e8ed">currentBs</a>;            <span class="comment">// phase B</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ab51fea639f3ef89eaeab2bd89619a2b3">currentCs</a>;            <span class="comment">// phase C</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0f5858ff7aded1c5ac147a520c568cc8">currentScale</a>;         <span class="comment">// current scaling coefficient</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a79a8d423d1134dd6d39ddb46e8a583cb">voltageScale</a>;         <span class="comment">// voltage scaling coefficient</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#af30442d8b566aab98c9ba3688decd950">adcScale</a>;             <span class="comment">// ADC scale for current and voltage</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#afcee069e0093de32698a4ab948e5e297">currentInvSF</a>;         <span class="comment">// current inverse scaling coefficient</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a7d10d2b3c3c6b1c1124b6dfeef6434a8">voltageInvSF</a>;         <span class="comment">// voltage inverse scaling coefficient</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">posElecTheta</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a1835029652f78a2aab1035b02aac5505">posMechTheta</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a164b5d6abbabf3e7cb0662e19d9527b6">speedWe</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#acc412ecbdee8b746a0ecd919440191d9">speedWePrev</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a>;               <span class="comment">// rotor angle</span></div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a72890bafa801cc569d9f40e0255946d2">  181</a></span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a72890bafa801cc569d9f40e0255946d2">speedWeObs</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ad1980f6d7e2ef79909f778496c21140c">Vdcbus</a>;               <span class="comment">// DC bus voltage</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0b772d5c3dc1791ae82c679b2d243e04">VdcbusMax</a>;            <span class="comment">// Maximum DC bus voltage</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ab2d6b2e8e15685ccfa749af2955cbb89">VdcbusMin</a>;            <span class="comment">// Minimum DC bus voltage</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    RAMPGEN <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a020c57fb39c9ed98e449b5da792a844c">rg</a>;                       <span class="comment">// a ramp generator to simulate an Angle</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    RMPCNTL <a class="code" href="struct___m_o_t_o_r___vars__t__.html#aed2829a0bf4280737a7e1da286e9c3dc">rc</a>;                       <span class="comment">// ramp control</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    CLARKE <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0367d29b1a91b56536397ac865f98856">clarke</a>;                    <span class="comment">// clarke transform</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    PARK <a class="code" href="struct___m_o_t_o_r___vars__t__.html#adf10d8bf710c45932b29a0082cba4da7">park</a>;                        <span class="comment">// park transform</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    IPARK <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ab76a972ea7ddfdc51496d314c33ab103">ipark</a>;                      <span class="comment">// inv park transform</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    SVGEN <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a744da92911cfb6d400af071fc93b6750">svgen</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    SPEED_MEAS_QEP <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a898387a736ec1cfff35524ee7bdb427c">speed</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a2751dc4a2bdf5944909593a1a6e2dcd8">  195</a></span>&#160;    <a class="code" href="struct___s_p_d___o_b_s_e_r_v_e_r__obj__.html">SPD_OBSERVER</a>   <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2751dc4a2bdf5944909593a1a6e2dcd8">speedObs</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    PID_CONTROLLER  <a class="code" href="struct___m_o_t_o_r___vars__t__.html#abccc5a9ed5cd7c7d613a437bb7a41835">pid_spd</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    PI_CONTROLLER <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a13dbe7c213d572dc435b1b8b2d7faf5f">pi_pos</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <a class="code" href="struct_f_c_l__cmplx_ctrl__t.html">FCL_cmplxCtrl_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="struct_f_c_l__cmplx_ctrl__t.html">FCL_cmplxCtrl_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="struct___f_c_l___parameters__.html">FCL_Parameters_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a21d3ece8abbf8b128f90f247723eafbb">fclUpdateLatency_us</a>;     <span class="comment">// PWM update latency since sampling</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a50effb88c66f55e99a964f36b7b002e2">focExecutionTime_us</a>;     <span class="comment">// FOC execution time since sampling</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6b1c2a05cf030a2ee30ebe949bf8762a">isrTicker</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keyword">volatile</span> uint32_t *<a class="code" href="struct___m_o_t_o_r___vars__t__.html#ac6caf80c6ab59dbe141b69fc33554df0">pwmCompA</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keyword">volatile</span> uint32_t *<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a8a58c061f9a116e8bf1af840386237e2">pwmCompB</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keyword">volatile</span> uint32_t *<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2ddcdb79756958d3b8344e4b65773dc3">pwmCompC</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">volatile</span> uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a668e1ce8239d79eb082ad2aa8c442bb6">curA_PPBRESULT</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">volatile</span> uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a662b6fc9e7eb8168f7c8b6bf1139ea85">curB_PPBRESULT</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">volatile</span> uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a3c7e7862ca5ac8bdd487080e9056aec7">curC_PPBRESULT</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">volatile</span> uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2aa282d73ef95085086eb989feef0b47">volDC_PPBRESULT</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keyword">volatile</span> <span class="keyword">union </span>ADCINTFLG_REG *<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a825f266f790c7dc2b3953a9765c2b8bf">pADCIntFlag</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keyword">volatile</span> <span class="keyword">struct </span>EQEP_REGS *<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>;  <span class="comment">// Aligned to lower 16-bits</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a68245838f1ded5d59ac17c2a1a679364">  221</a></span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a68245838f1ded5d59ac17c2a1a679364">curA_resultBase</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a86561cc9290acfdb9b8b170bc147f028">  222</a></span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a86561cc9290acfdb9b8b170bc147f028">curB_resultBase</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a4ec1d02e9cc666364f56dd260bc41488">  223</a></span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a4ec1d02e9cc666364f56dd260bc41488">curC_resultBase</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#aea2e5642ecbf4d0585c06ea0070c64b9">pwmBaseU</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a4a2b45ed2d7f6c79e742c5b0e30b5fc5">pwmBaseV</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a87c329579423217bb717df650debfd64">pwmBaseW</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    uint32_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a068cf049323b7fa745065394ee183b6e">adcBaseW</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a45cca2674e2f2581ff555c1c0528820c">  230</a></span>&#160;    ADC_PPBNumber <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a45cca2674e2f2581ff555c1c0528820c">curA_PPBNumber</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a684a392bc540ef74e8fd3e39e2f8e33e">  231</a></span>&#160;    ADC_PPBNumber <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a684a392bc540ef74e8fd3e39e2f8e33e">curB_PPBNumber</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a11a2443d16cad2b43cc2161b6f3cf115">  232</a></span>&#160;    ADC_PPBNumber <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a11a2443d16cad2b43cc2161b6f3cf115">curC_PPBNumber</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a52a0434a8dced1faae6514c124b102d4">  234</a></span>&#160;    ADC_IntNumber <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a52a0434a8dced1faae6514c124b102d4">adcIntNumber</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    uint16_t  <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a4095fa177f9de5fb8369741c97c06709">fclClrCntr</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    uint16_t  <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a82496a8e99c798056d6afbc62dee458b">fclCycleCountMax</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    uint16_t  <a class="code" href="struct___m_o_t_o_r___vars__t__.html#aaff557896b5567eb453d4ac6ddf28ed7">fclCycleCount</a>;            <span class="comment">// FCL Latency variable</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    uint16_t  <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f70d2851e255556a6bc5eb5b3760fba">focClrCntr</a>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    uint16_t  <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ac00e69bd392a25c54359b38aa9844737">focCycleCountMax</a>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    uint16_t  <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a4959ae6c555c13c0460a6e5fc6515b1c">focCycleCount</a>;            <span class="comment">// FOC execution time variable</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a17258e83aa2fa5887b00b224a5fe720c">speedLoopPrescaler</a>;        <span class="comment">// Speed loop pre scalar</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a7c0b643e9f43bf8f690a00f8c3f9c508">speedLoopCount</a>;            <span class="comment">// Speed loop counter</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a3fa286a9ddb9ea7195356e3b63363a73">alignCntr</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2d649a4cb60f9e55105c493243f4ec8e">alignCnt</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ae2c4a640bb3723a510bd6b52bc3f2908">posPtrMax</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#afce0140a63baa22eec66701951f5c166">posPtr</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#acd32e8b0909418c089ba99c8cb75de35">currentThreshHi</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a3946776ccea695f415bea761a8992355">currentThreshLo</a>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ab9f8b59ad3689f2d9efd8f9c6b329c42">drvEnableGateGPIO</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a19158b21b751391324f75695b5601e27">drvFaultTripGPIO</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a49ed153f53d64abc0b458339eb197fde">drvClearFaultGPIO</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#abdbaa1ddd8222dc5b587dbc08d885cf1">tripCountDMC</a>;              <span class="comment">// motor fault times counter</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ab311cd432596e49ca87a85d117bcbfdb">tripFlagDMC</a>;               <span class="comment">// motor fault status</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    uint16_t <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a4d4f20bef25ac8eeeb6d45de0afff925">tripFlagPrev</a>;              <span class="comment">// motor fault prev status</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59">ENC_Status_e</a>    <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">lsw</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    PWMUpdateMode_e <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ae51b6c69db92846be952c1ed356968ae">pwmUpdateMode</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="struct___m_o_t_o_r___vars__t__.html#a76de3008869a92eee20dad11a16ef11d">  264</a></span>&#160;    <a class="code" href="group___u_s_e_r_p_a_r_a_m_s.html#ga8109fab3f1b7f65d6dcffcb619664f46">MotorNum_e</a>      <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a76de3008869a92eee20dad11a16ef11d">motorNum</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    MotorRunStop_e  <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ae21502cbbba9a9a913da7ba2bbfd3c8c">runMotor</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    CtrlState_e     <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a80ab64ff0d35c73729594376dcd95e23">ctrlState</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#ad72bf041ee64e19f22d1e632926f6efa">clearTripFlagDMC</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa13752a50559a5325d9bdaa79f23d603">lsw2EntryFlag</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a1776ba127e58a6c8291766064f29a5e1">offsetDoneFlag</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="struct___m_o_t_o_r___vars__t__.html#a1a2b006bd11a044c35caa007ce4b7bab">sfraEnableFlag</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;} <a class="code" href="fcl__foc__cpu__dm_8h.html#ab3361669cbeac3a05681f954bcf0ae57">MOTOR_Vars_t</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="keyword">extern</span> <a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> <a class="code" href="fcl__foc__cpu__dm_8h.html#af520387b3f3661a8140e1735697fe3d7">motorVars</a>[2];</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">// ****************************************************************************</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">// functions</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="keyword">extern</span> uint32_t <a class="code" href="fcl__foc__cpu__dm_8h.html#ae1b5fdb7b169e69232f0a914017c43f7">FCL_getSwVersion</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a69191886d2a005822e02b4e0fe8bbcc0">FCL_initPWM</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                        <span class="keyword">const</span> uint32_t pwmBaseU,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                        <span class="keyword">const</span> uint32_t pwmBaseV,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                        <span class="keyword">const</span> uint32_t pwmBaseW);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a6e9cbdf3d9fbbbd524930d8518bd840b">FCL_initQEP</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor, <span class="keyword">const</span> uint32_t qepBaseA);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#aea4f2a415443562ae8911463bc08f4f5">FCL_initADC_2In</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor, uint32_t adcBaseW,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                      <span class="keyword">const</span> uint32_t adcResultBaseV, ADC_PPBNumber adcV_PPBNum,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                      <span class="keyword">const</span> uint32_t adcResultBaseW, ADC_PPBNumber adcW_PPBNum);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a133da4fd449172d6c6733bd2aa3a576c">FCL_initADC_3In</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor, uint32_t adcBaseW,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                      <span class="keyword">const</span> uint32_t adcResultBaseU, ADC_PPBNumber adcU_PPBNum,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                      <span class="keyword">const</span> uint32_t adcResultBaseV, ADC_PPBNumber adcV_PPBNum,</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                      <span class="keyword">const</span> uint32_t adcResultBaseW, ADC_PPBNumber adcW_PPBNum);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">// static inline functions will be put in header files</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#aa0f41c5cd33e3769269a00fac950c82c">  302</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#aa0f41c5cd33e3769269a00fac950c82c">FCL_readCount</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aaff557896b5567eb453d4ac6ddf28ed7">fclCycleCount</a> = EPWM_getTimeBaseCounterValue(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aea2e5642ecbf4d0585c06ea0070c64b9">pwmBaseU</a>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">// This function is called to reset the FCL variables and is useful when user</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">// wants to stop the motor and restart the motor</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a2c0ca78345d91bd859fa5c30acf11928">  313</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a2c0ca78345d91bd859fa5c30acf11928">FCL_resetController</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;{</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> = 0.0;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a> = 0;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> = 0;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a> = 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> = 0;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a37013039d6e0ff1a42d153c6142f236b">xErr</a> = 0;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> = 0.0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a> = 0;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> = 0;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a> = 0;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> = 0;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a37013039d6e0ff1a42d153c6142f236b">xErr</a> = 0;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#acc412ecbdee8b746a0ecd919440191d9">speedWePrev</a> = 0;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">// CURRENT PI CONTROLLER ROUTINES</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a7f9595c15bfe1564fc4b8f633ef202a1">  337</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a7f9595c15bfe1564fc4b8f633ef202a1">FCL_runPI</a>(<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html">FCL_cmplxCtrl_t</a> *pPI)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    pPI-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> += (pPI-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> * pPI-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#ad4fbe5e18271fb101f47f8ef978c8370">Kerr</a>) + pPI-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    pPI-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> = __fsat(pPI-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a>, pPI-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aefa83f67f0ba09e969a4351b4a143f39">Umax</a>, pPI-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a1269922a1b76bfaa4d0748a55ff8c467">Umin</a>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">// Complex control in Fast Current Loop</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a41c613fdfbe4622f0614a6d9c7fcab53">  348</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a41c613fdfbe4622f0614a6d9c7fcab53">FCL_runCCSyn</a>(<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html">FCL_cmplxCtrl_t</a> *pId, <a class="code" href="struct_f_c_l__cmplx_ctrl__t.html">FCL_cmplxCtrl_t</a> *pIq)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> errTemp;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    errTemp = pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> * pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4e522d8a4c6ab0828549b68f8ef3c44f">cosWTs</a> - pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> * pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a1af0134e4a16db9dfe1c7de53329bab8">sinWTs</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> += pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4753bc1807218628d414505fe0ba6173">kDirect</a> * errTemp + pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> = __fsat(pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a>, pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aefa83f67f0ba09e969a4351b4a143f39">Umax</a>, pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a1269922a1b76bfaa4d0748a55ff8c467">Umin</a>);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    errTemp = pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> * pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4e522d8a4c6ab0828549b68f8ef3c44f">cosWTs</a> + pId-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> * pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a1af0134e4a16db9dfe1c7de53329bab8">sinWTs</a>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> += pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4753bc1807218628d414505fe0ba6173">kDirect</a> * errTemp + pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> = __fsat(pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a>, pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aefa83f67f0ba09e969a4351b4a143f39">Umax</a>, pIq-&gt;<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a1269922a1b76bfaa4d0748a55ff8c467">Umin</a>);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">// PI CONTROL ROUTINES</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">// FCL PI controller</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a1234c2ed13621d046910a5920962eda3">  369</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a1234c2ed13621d046910a5920962eda3">FCL_runPICtrl</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keyword">register</span> <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>  clarke1Alpha, clarke1Beta;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keyword">register</span> <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>  park1Sine, park1Cosine;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    SVGEN     svgen2;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    park1Sine   = __sinpuf32(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a>);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    park1Cosine = __cospuf32(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// CLARKE transformation</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">#if(DRIVER_MODULE == BITFIELD_MODE)</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">while</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a825f266f790c7dc2b3953a9765c2b8bf">pADCIntFlag</a>-&gt;bit.ADCINT1 == 0);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">while</span>(ADC_getInterruptStatus(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a068cf049323b7fa745065394ee183b6e">adcBaseW</a>, pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a52a0434a8dced1faae6514c124b102d4">adcIntNumber</a>) == 0);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">//    clarke1Alpha = (float32_t)((int16_t)HWREGH(pMotor-&gt;curA_PPBRESULT) *</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">//            pMotor-&gt;FCL_params.adcPPBScale);</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">//    clarke1Beta  = ((clarke1Alpha +</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">//                   (2.0F * ((float32_t)((int16_t)HWREGH(pMotor-&gt;curB_PPBRESULT))</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">//                           * pMotor-&gt;FCL_params.adcPPBScale))) * ONEbySQRT3);</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    clarke1Alpha = (<a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>)((int16_t)HWREGH(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a668e1ce8239d79eb082ad2aa8c442bb6">curA_PPBRESULT</a>) *</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.adcAlphaScale);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    clarke1Beta  = (clarke1Alpha +</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                   (((<a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>)((int16_t)HWREGH(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a662b6fc9e7eb8168f7c8b6bf1139ea85">curB_PPBRESULT</a>))</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                           * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.adcBetaScale))) * ONEbySQRT3;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// PARK Transformation</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> -</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            ((clarke1Beta * park1Cosine) - (clarke1Alpha * park1Sine));</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> -</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            ((clarke1Alpha * park1Cosine) + (clarke1Beta * park1Sine));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// PI controllers for Id and Iq</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="fcl__foc__cpu__dm_8h.html#a7f9595c15bfe1564fc4b8f633ef202a1">FCL_runPI</a>(&amp;pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>);     <span class="comment">// Iq loop - PI controller - CPU</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="fcl__foc__cpu__dm_8h.html#a7f9595c15bfe1564fc4b8f633ef202a1">FCL_runPI</a>(&amp;pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>);     <span class="comment">// Id loop - PI controller - CPU</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// Inverse Park Transformation</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    svgen2.Ualpha = ((pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> * park1Cosine) -</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> * park1Sine)) * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a0af7308b02df3cb4d9d35138eeeaedfa">carrierMid</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    svgen2.Ubeta  = ((pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> * park1Cosine) +</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> * park1Sine)) * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a0b3e67e0e07cda2068bc3ca1b0d85c6e">cmidsqrt3</a>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// PWM pulse width time calculation</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    svgen2.Tb = (svgen2.Ubeta - svgen2.Ualpha) / 2;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    svgen2.Tc = svgen2.Tb - svgen2.Ubeta;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    svgen2.tmp2  = __fmax(__fmax(svgen2.Ualpha, svgen2.Tc), svgen2.Tb);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    svgen2.tmp2 += __fmin(__fmin(svgen2.Ualpha, svgen2.Tc), svgen2.Tb);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    svgen2.tmp1  = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a0af7308b02df3cb4d9d35138eeeaedfa">carrierMid</a> - (svgen2.tmp2 / 2);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">// PWM updates</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    *(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#ac6caf80c6ab59dbe141b69fc33554df0">pwmCompA</a>) = (uint32_t)(svgen2.Tc + svgen2.tmp1);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    *(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a8a58c061f9a116e8bf1af840386237e2">pwmCompB</a>) = (uint32_t)(svgen2.Ualpha + svgen2.tmp1);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    *(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2ddcdb79756958d3b8344e4b65773dc3">pwmCompC</a>) = (uint32_t)(svgen2.Tb + svgen2.tmp1);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="fcl__foc__cpu__dm_8h.html#aa0f41c5cd33e3769269a00fac950c82c">FCL_readCount</a>(pMotor);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">// Wrap up function to be called by the user app after end of current loop</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a44b339387041afdcd158c517bfb11d75">  447</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a44b339387041afdcd158c517bfb11d75">FCL_runPICtrlWrap</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> Vbase = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#afa80ecf4ae7e91ad15efdeef9ddb9c97">Vdcbus</a> * (1.15f / 2.0f);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> invZbase = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a8c70a4519752e26f2a21ae8fc4becad2">Ibase</a> / Vbase;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// To save CPU cycles and speed up calcn, carry over math is done within</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">//   this wrap function and .CarryOver carries it to the next iteration</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">//   Bemf calc is rolled in to the Q calcs as the speed and flux does not</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">//   change much between iterations - equation tweaked to fit here</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// Update PI ID parameters</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> wccXinvZb = invZbase * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a8f5d75a54efb29a98c421a4d13540569">wccD</a>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a588eb606d0a702ef5e865b1e19050862">Kp</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a3e1a25dbad6128ce8e6d70016d74bd65">Ld</a> * wccXinvZb;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a3f84b1976825531653cd6fcf143deb10">Ki</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a3d99ffd372594d3bb4cc3c13b9b83dd0">Rd</a> * wccXinvZb *</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#af15911e26f3e6f472c09c400a80c8077">tSamp</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> Ki_rev = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a3f84b1976825531653cd6fcf143deb10">Ki</a> / 2;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#ad4fbe5e18271fb101f47f8ef978c8370">Kerr</a> = Ki_rev + pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a588eb606d0a702ef5e865b1e19050862">Kp</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a8f24161cb80415bcc6da7200c6ace6a7">KerrOld</a> = Ki_rev - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a588eb606d0a702ef5e865b1e19050862">Kp</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a> =</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a8f24161cb80415bcc6da7200c6ace6a7">KerrOld</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// Update PI IQ parameters</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    wccXinvZb = invZbase * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a224b151be11bd9e7eaa9f39ab2478eba">wccQ</a>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a588eb606d0a702ef5e865b1e19050862">Kp</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#af56e9c07682275c6b2b9c6c30557dbcd">Lq</a> * wccXinvZb;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a3f84b1976825531653cd6fcf143deb10">Ki</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a7ec25f0bc960cf359be008dcdaa8b5c7">Rq</a> * wccXinvZb *</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#af15911e26f3e6f472c09c400a80c8077">tSamp</a>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    Ki_rev = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a3f84b1976825531653cd6fcf143deb10">Ki</a> / 2;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#ad4fbe5e18271fb101f47f8ef978c8370">Kerr</a> = Ki_rev + pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a588eb606d0a702ef5e865b1e19050862">Kp</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a8f24161cb80415bcc6da7200c6ace6a7">KerrOld</a> = Ki_rev - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a588eb606d0a702ef5e865b1e19050862">Kp</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a> =</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;           (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a8f24161cb80415bcc6da7200c6ace6a7">KerrOld</a>) +</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;           (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a366e7908e6f254f9d20a7445325ae053">BemfK</a> * (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a164b5d6abbabf3e7cb0662e19d9527b6">speedWe</a> - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#acc412ecbdee8b746a0ecd919440191d9">speedWePrev</a>));</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#acc412ecbdee8b746a0ecd919440191d9">speedWePrev</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a164b5d6abbabf3e7cb0662e19d9527b6">speedWe</a>;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">// to pass on the id and iq current feedback back to user,</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">// update them in the wrap function</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#ac23f930d98cad1bcd54769c68dcfd114">fbk</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#ac23f930d98cad1bcd54769c68dcfd114">fbk</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">// COMPLEX CONTROL ROUTINES</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">// FCL complex controller</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#ac3999b73d65218a5a617d0b07dbbb6d0">  509</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#ac3999b73d65218a5a617d0b07dbbb6d0">FCL_runComplexCtrl</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;{</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">register</span> <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>  clarke1Alpha, clarke1Beta;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keyword">register</span> <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>  park1Sine, park1Cosine;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    SVGEN     svgen2;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    park1Sine   = __sinpuf32(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    park1Cosine = __cospuf32(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a>);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">// CLARKE transformation</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="preprocessor">#if(DRIVER_MODULE == BITFIELD_MODE)</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">while</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a825f266f790c7dc2b3953a9765c2b8bf">pADCIntFlag</a>-&gt;bit.ADCINT1 == 0);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">while</span>(ADC_getInterruptStatus(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a068cf049323b7fa745065394ee183b6e">adcBaseW</a>, pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a52a0434a8dced1faae6514c124b102d4">adcIntNumber</a>) == 0);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">//    clarke1Alpha = (float32_t)((int16_t)HWREGH(pMotor-&gt;curA_PPBRESULT) *</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">//            pMotor-&gt;FCL_params.adcPPBScale);</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">//    clarke1Beta  = ((clarke1Alpha +</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">//                   (2.0F * ((float32_t)((int16_t)HWREGH(pMotor-&gt;curB_PPBRESULT))</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">//                           * pMotor-&gt;FCL_params.adcPPBScale))) *ONEbySQRT3);</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    clarke1Alpha = (<a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>)((int16_t)HWREGH(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a668e1ce8239d79eb082ad2aa8c442bb6">curA_PPBRESULT</a>) *</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.adcAlphaScale);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    clarke1Beta  = (clarke1Alpha +</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                   (((<a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a>)((int16_t)HWREGH(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a662b6fc9e7eb8168f7c8b6bf1139ea85">curB_PPBRESULT</a>))</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                           * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.adcBetaScale))) * ONEbySQRT3;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="comment">// PARK Transformation</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> -</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            ((clarke1Beta * park1Cosine) - (clarke1Alpha * park1Sine));</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> -</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            ((clarke1Alpha * park1Cosine) + (clarke1Beta * park1Sine));</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">//  Complex digital controllers for Id and Iq</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="fcl__foc__cpu__dm_8h.html#a41c613fdfbe4622f0614a6d9c7fcab53">FCL_runCCSyn</a>(&amp;pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>, &amp;pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="comment">// Inverse Park Transformation</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    svgen2.Ualpha = ((pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> * park1Cosine) -</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> * park1Sine)) * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a0af7308b02df3cb4d9d35138eeeaedfa">carrierMid</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    svgen2.Ubeta  = ((pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> * park1Cosine) +</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">out</a> * park1Sine)) * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a0b3e67e0e07cda2068bc3ca1b0d85c6e">cmidsqrt3</a>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">// PWM pulse width time calculation</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    svgen2.Tb = (svgen2.Ubeta - svgen2.Ualpha) / 2.0;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    svgen2.Tc = svgen2.Tb - svgen2.Ubeta;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    svgen2.tmp2  = __fmax(__fmax(svgen2.Ualpha, svgen2.Tc), svgen2.Tb);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    svgen2.tmp2 += __fmin(__fmin(svgen2.Ualpha, svgen2.Tc), svgen2.Tb);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    svgen2.tmp1  = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a0af7308b02df3cb4d9d35138eeeaedfa">carrierMid</a> - (svgen2.tmp2 / 2.0);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// PWM updates</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    *(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#ac6caf80c6ab59dbe141b69fc33554df0">pwmCompA</a>) = (uint32_t)(svgen2.Tc + svgen2.tmp1);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    *(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a8a58c061f9a116e8bf1af840386237e2">pwmCompB</a>) = (uint32_t)(svgen2.Ualpha + svgen2.tmp1);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    *(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2ddcdb79756958d3b8344e4b65773dc3">pwmCompC</a>) = (uint32_t)(svgen2.Tb + svgen2.tmp1);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="fcl__foc__cpu__dm_8h.html#aa0f41c5cd33e3769269a00fac950c82c">FCL_readCount</a>(pMotor);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">// Wrap up function to be called by the user application at the completion of</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">// Fast Current Loop (FCL) in Complex Control Mode</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a0e9423f650c97b2414f50ae9f71bd570">  588</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a0e9423f650c97b2414f50ae9f71bd570">FCL_runComplexCtrlWrap</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;{</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> Vbase = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#afa80ecf4ae7e91ad15efdeef9ddb9c97">Vdcbus</a> * 1.15/2;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> invZbase = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a8c70a4519752e26f2a21ae8fc4becad2">Ibase</a> / Vbase;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a> WTs = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a164b5d6abbabf3e7cb0662e19d9527b6">speedWe</a> *</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#ab967dfcdf01990843aca96c739d7e612">Wbase</a> * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#af15911e26f3e6f472c09c400a80c8077">tSamp</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4e522d8a4c6ab0828549b68f8ef3c44f">cosWTs</a>  = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4e522d8a4c6ab0828549b68f8ef3c44f">cosWTs</a> = __cos(WTs);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a1af0134e4a16db9dfe1c7de53329bab8">sinWTs</a>  = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a1af0134e4a16db9dfe1c7de53329bab8">sinWTs</a> = __sin(WTs);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a623ba289807fe13058841c5d18d5d597">expVal</a>  = expf( -(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a3d99ffd372594d3bb4cc3c13b9b83dd0">Rd</a> /</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a3e1a25dbad6128ce8e6d70016d74bd65">Ld</a>) * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#af15911e26f3e6f472c09c400a80c8077">tSamp</a>);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a623ba289807fe13058841c5d18d5d597">expVal</a>  = expf( -(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a7ec25f0bc960cf359be008dcdaa8b5c7">Rq</a> /</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#af56e9c07682275c6b2b9c6c30557dbcd">Lq</a>) * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#af15911e26f3e6f472c09c400a80c8077">tSamp</a>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4753bc1807218628d414505fe0ba6173">kDirect</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a3d99ffd372594d3bb4cc3c13b9b83dd0">Rd</a> * invZbase *</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;              __sqrt(2.0F - 2.0F * __cos(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a8f5d75a54efb29a98c421a4d13540569">wccD</a> *</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                         pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#af15911e26f3e6f472c09c400a80c8077">tSamp</a>)) /</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                         (1.0F - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a623ba289807fe13058841c5d18d5d597">expVal</a>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4753bc1807218628d414505fe0ba6173">kDirect</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a7ec25f0bc960cf359be008dcdaa8b5c7">Rq</a> * invZbase *</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;              __sqrt(2.0F - 2.0F * __cos(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a224b151be11bd9e7eaa9f39ab2478eba">wccQ</a> *</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                         pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#af15911e26f3e6f472c09c400a80c8077">tSamp</a>)) /</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                         (1.0F - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a623ba289807fe13058841c5d18d5d597">expVal</a>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// To save CPU cycles and speed up calcn, carry over math is done within</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">//    this wrap function and &#39;carryOver&#39; carries it to the next iteration</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="comment">// Bemf calc is rolled in to the Q calcs as the speed and flux does not</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">//    change much between iterations - equation tweaked to fit here</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a> = ( -pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4753bc1807218628d414505fe0ba6173">kDirect</a> *</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a623ba289807fe13058841c5d18d5d597">expVal</a>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">carryOver</a> = ( -pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a4753bc1807218628d414505fe0ba6173">kDirect</a> *</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a> * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#a623ba289807fe13058841c5d18d5d597">expVal</a>) +</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;           (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">FCL_params</a>.<a class="code" href="struct___f_c_l___parameters__.html#a366e7908e6f254f9d20a7445325ae053">BemfK</a> * (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a164b5d6abbabf3e7cb0662e19d9527b6">speedWe</a> - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#acc412ecbdee8b746a0ecd919440191d9">speedWePrev</a>));</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#acc412ecbdee8b746a0ecd919440191d9">speedWePrev</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a164b5d6abbabf3e7cb0662e19d9527b6">speedWe</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">// to pass on the id and iq current feedback back to user,</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="comment">// update them in the wrap function</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#ac23f930d98cad1bcd54769c68dcfd114">fbk</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">cmplx_Id</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#ac23f930d98cad1bcd54769c68dcfd114">fbk</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">ref</a> - pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">cmplx_Iq</a>.<a class="code" href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">err</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">// QEP INTERFACE ROUTINES</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="preprocessor">#if(DRIVER_MODULE == BITFIELD_MODE)</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">// QEP position Estimation Module</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a94bdee75ce69046fc699fa2a1e78686e">FCL_runQEPPosEst</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;{</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">lsw</a> == <a class="code" href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59acfbbe72b6c34d037aa843b239e44fd95">ENC_CALIBRATION_DONE</a>)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="comment">// QEP UTO and ADCSOC are carefully pre aligned</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="comment">// QEP POSLAT = QEP POSCNT at QEP UTO event that is in sync with ADCSOC</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="comment">// Therefore, read mech angle from QEP POSLAT</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a1835029652f78a2aab1035b02aac5505">posMechTheta</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aafc2f2eac6c8172a86c264561631accd">posMechScaler</a> *</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QPOSLAT;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">posElecTheta</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a892cb7440364883a362f3298881f3183">polePairs</a>  * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a1835029652f78a2aab1035b02aac5505">posMechTheta</a>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">posElecTheta</a> -= ((int32)(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">posElecTheta</a>));</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">posElecTheta</a>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">lsw</a> == <a class="code" href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59abdd7f3da586206202a4afd81c9a7b82b">ENC_WAIT_FOR_INDEX</a>)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="comment">// If QEP index pulse is found :-</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="comment">// POSILAT captures POSCNT at the first INDEX pulse.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="comment">// Load POSINIT with POSILAT, so that at every future INDEX event,</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="comment">// POSCNT is loaded (reset) with POSINIT</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">if</span> (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QFLG.all &amp; <a class="code" href="qep__defs_8h.html#aa14d18f36837bc84ab727db4ca336e47">QEP_FLAG_IEL_EVENT</a>)</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            <span class="comment">//QPOSILAT updates on every Index edge(IEL)</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QPOSINIT = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QPOSILAT;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <span class="comment">//make QPOSCNT=QPOSINIT on Index edge</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QEPCTL.all |= <a class="code" href="f28x__bmsk_8h.html#a0bfaee1c58c58e6380fef76a48171503">IEI_RISING</a>;   <span class="comment">//</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">lsw</a> = <a class="code" href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59acfbbe72b6c34d037aa843b239e44fd95">ENC_CALIBRATION_DONE</a>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        }   <span class="comment">// Keep the latched pos. at the first index</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a020c57fb39c9ed98e449b5da792a844c">rg</a>.Out;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="comment">// Alignment Routine - Reset POSCNT to ZERO</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="comment">// during alignment, reset the current shaft position to zero</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QPOSCNT = 0;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="comment">// write to the entire register - it is more efficient</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="comment">// Reset pos cnt for QEP</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="comment">// pMotor-&gt;QepRegs-&gt;QCLR.bit.IEL = 1;</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QCLR.all = <a class="code" href="qep__defs_8h.html#aa14d18f36837bc84ab727db4ca336e47">QEP_FLAG_IEL_EVENT</a>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="comment">// reset poscnt init on index</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="comment">//pMotor-&gt;QepRegs-&gt;QEPCTL.all &amp;= ~IEI_RISING;</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QEPCTL.bit.IEI = 0;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a>  = 0.0;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">// QEP peripheral - clearing flags after previous read</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a2a9f7e9514dc15cfa2a4de6196d25a17">FCL_runQEPPosEstWrap</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;{</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">if</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">lsw</a> != <a class="code" href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59a92e46e3ea5c542935595d0c8547a5cdd">ENC_ALIGNMENT</a>)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="comment">// Check an index occurrence</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">if</span> (pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QFLG.all &amp; <a class="code" href="qep__defs_8h.html#aa14d18f36837bc84ab727db4ca336e47">QEP_FLAG_IEL_EVENT</a>)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="comment">// Clear interrupt flag</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            <span class="comment">// pMotor-&gt;QepRegs-&gt;QCLR.bit.IEL = 1;</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QCLR.all = <a class="code" href="qep__defs_8h.html#aa14d18f36837bc84ab727db4ca336e47">QEP_FLAG_IEL_EVENT</a>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="comment">// Check unit Time out-event for speed calculation:</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="comment">// Unit Timer is sync&#39;ed with motor PWM during INIT function</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">if</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QFLG.all &amp; <a class="code" href="qep__defs_8h.html#ac2ac58a8a1df52e5867fd5de3ef8355a">QEP_FLAG_UTO_EVENT</a>)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QCLR.all = <a class="code" href="qep__defs_8h.html#ac2ac58a8a1df52e5867fd5de3ef8355a">QEP_FLAG_UTO_EVENT</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="comment">// Low Speed Calculation</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <span class="keywordflow">if</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QEPSTS.all &amp; 0x000C)   <span class="comment">//QEPSTS.(COEF || CDEF)</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;            {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <span class="comment">// Capture Counter overflowed, hence do no compute speed</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>-&gt;QEPSTS.all = 0x000C;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a9e2695aca83b03674011c0067079f32d">  751</a></span>&#160;<span class="preprocessor">#define EQEP_POSCNT_INIT_NOTHING             0U </span></div>
<div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#aa06068b8d1916927176ccbd4c5780808">  752</a></span>&#160;<span class="preprocessor">#define EQEP_POSCNT_INIT_RISING_EDGE    0x0200U </span></div>
<div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a5a02e157758c3917d79d3541600e20cd">  753</a></span>&#160;<span class="preprocessor">#define EQEP_POSCNT_INIT_FALLING_EDGE   0x0300U </span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="preprocessor"></span> </div>
<div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#ac8721efc6f8b553083343daa311c70dd">  755</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#ac8721efc6f8b553083343daa311c70dd">EQEP_resetPoscnt</a>(uint32_t base, uint16_t initMode)</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;{</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="comment">// Check the arguments.</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    ASSERT(EQEP_isBaseValid(base));</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// Set the init mode in the QEP Control register.</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    HWREGH(base + EQEP_O_QEPCTL) = (HWREGH(base + EQEP_O_QEPCTL) &amp;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                                    ~(EQEP_QEPCTL_IEI_M)) | initMode;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;}</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">// QEP position Estimation Module</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00772"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a94bdee75ce69046fc699fa2a1e78686e">  772</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a94bdee75ce69046fc699fa2a1e78686e">FCL_runQEPPosEst</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;{</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    uint32_t qepBase = (uint32_t)pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">lsw</a> == <a class="code" href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59acfbbe72b6c34d037aa843b239e44fd95">ENC_CALIBRATION_DONE</a>)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="comment">// QEP UTO and ADCSOC are carefully pre aligned</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="comment">// QEP POSLAT = QEP POSCNT at QEP UTO event that is in sync with ADCSOC</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="comment">// Therefore, read mech angle from QEP POSLAT</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a1835029652f78a2aab1035b02aac5505">posMechTheta</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aafc2f2eac6c8172a86c264561631accd">posMechScaler</a> *</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                EQEP_getPositionLatch(qepBase);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">posElecTheta</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a892cb7440364883a362f3298881f3183">polePairs</a>  * pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a1835029652f78a2aab1035b02aac5505">posMechTheta</a>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">posElecTheta</a> -= ((int32)(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">posElecTheta</a>));</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">posElecTheta</a>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">lsw</a> == <a class="code" href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59abdd7f3da586206202a4afd81c9a7b82b">ENC_WAIT_FOR_INDEX</a>)</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="comment">// If QEP index pulse is found :-</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="comment">// POSILAT captures POSCNT at the first INDEX pulse.</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="comment">// Load POSINIT with POSILAT, so that at every future INDEX event,</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="comment">// POSCNT is loaded (reset) with POSINIT</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">if</span> (EQEP_getInterruptStatus(qepBase) &amp; EQEP_INT_INDEX_EVNT_LATCH)</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="comment">//QPOSINIT = QPOSILAT (QPOSILAT updates on Index edge(IEL))</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            EQEP_setInitialPosition(qepBase,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                                    EQEP_getIndexPositionLatch(qepBase));</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <span class="comment">//make QPOSCNT=QPOSINIT on Index edge</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <a class="code" href="fcl__foc__cpu__dm_8h.html#ac8721efc6f8b553083343daa311c70dd">EQEP_resetPoscnt</a>(qepBase, <a class="code" href="fcl__foc__cpu__dm_8h.html#aa06068b8d1916927176ccbd4c5780808">EQEP_POSCNT_INIT_RISING_EDGE</a>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">lsw</a> = <a class="code" href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59acfbbe72b6c34d037aa843b239e44fd95">ENC_CALIBRATION_DONE</a>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        }   <span class="comment">// Keep the latched pos. at the first index</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a> = pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a020c57fb39c9ed98e449b5da792a844c">rg</a>.Out;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="comment">// Alignment Routine - Reset POSCNT to ZERO</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="comment">// during alignment, reset the current shaft position to zero</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        EQEP_setPosition(qepBase, 0);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        EQEP_clearInterruptStatus(qepBase, EQEP_INT_INDEX_EVNT_LATCH);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <a class="code" href="fcl__foc__cpu__dm_8h.html#ac8721efc6f8b553083343daa311c70dd">EQEP_resetPoscnt</a>(qepBase, <a class="code" href="fcl__foc__cpu__dm_8h.html#a9e2695aca83b03674011c0067079f32d">EQEP_POSCNT_INIT_NOTHING</a>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">pangle</a> = 0;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;}</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">// QEP peripheral - clearing flags after previous read</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="fcl__foc__cpu__dm_8h.html#a2a9f7e9514dc15cfa2a4de6196d25a17">  831</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="fcl__foc__cpu__dm_8h.html#a2a9f7e9514dc15cfa2a4de6196d25a17">FCL_runQEPPosEstWrap</a>(<a class="code" href="struct___m_o_t_o_r___vars__t__.html">MOTOR_Vars_t</a> *pMotor)</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;{</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    uint32_t qepBase = (uint32_t)pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">pQEPRegs</a>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">if</span>(pMotor-&gt;<a class="code" href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">lsw</a> != <a class="code" href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59a92e46e3ea5c542935595d0c8547a5cdd">ENC_ALIGNMENT</a>)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="comment">// Check an index occurrence</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="keywordflow">if</span> (EQEP_getInterruptStatus(qepBase) &amp; EQEP_INT_INDEX_EVNT_LATCH)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <span class="comment">// Clear index event INT flag</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            EQEP_clearInterruptStatus(qepBase, EQEP_INT_INDEX_EVNT_LATCH);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="comment">// Check unit Time out-event for speed calculation</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="comment">// Unit Timer is sync&#39;ed with motor PWM during INIT function</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">if</span> (EQEP_getInterruptStatus(qepBase) &amp; EQEP_INT_UNIT_TIME_OUT)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="comment">// Clear UTO event INT flag</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            EQEP_clearInterruptStatus(qepBase, EQEP_INT_UNIT_TIME_OUT);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <span class="comment">// Low Speed Calculation</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            <span class="keywordflow">if</span>(EQEP_getStatus(qepBase) &amp;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                    (EQEP_STS_CAP_OVRFLW_ERROR | EQEP_STS_CAP_DIR_ERROR))</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                <span class="comment">// Capture Counter overflowed, hence do no compute speed</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                EQEP_clearStatus(qepBase,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                     (EQEP_STS_CAP_OVRFLW_ERROR | EQEP_STS_CAP_DIR_ERROR));</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;}</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="preprocessor">#endif // BF</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* _FAST_CURRENT_LOOP_H_ */</span><span class="preprocessor"></span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ac6caf80c6ab59dbe141b69fc33554df0"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ac6caf80c6ab59dbe141b69fc33554df0">_MOTOR_Vars_t_::pwmCompA</a></div><div class="ttdeci">volatile uint32_t * pwmCompA</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:348</div></div>
<div class="ttc" id="aspeed__observer_8h_html"><div class="ttname"><a href="speed__observer_8h.html">speed_observer.h</a></div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a41c613fdfbe4622f0614a6d9c7fcab53"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a41c613fdfbe4622f0614a6d9c7fcab53">FCL_runCCSyn</a></div><div class="ttdeci">static void FCL_runCCSyn(FCL_cmplxCtrl_t *pId, FCL_cmplxCtrl_t *pIq)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:348</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_af51c49f9040c3b9fb71734780bad848a"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#af51c49f9040c3b9fb71734780bad848a">FCL_cmplxCtrl_t::ref</a></div><div class="ttdeci">float32_t ref</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:24</div></div>
<div class="ttc" id="agroup___e_n_c_o_d_e_r_html_ga1a6dbac9d2aedd8fdb0436ffbe0a6d59acfbbe72b6c34d037aa843b239e44fd95"><div class="ttname"><a href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59acfbbe72b6c34d037aa843b239e44fd95">ENC_CALIBRATION_DONE</a></div><div class="ttdef"><b>Definition:</b> encoder.h:91</div></div>
<div class="ttc" id="aqep__defs_8h_html_aa14d18f36837bc84ab727db4ca336e47"><div class="ttname"><a href="qep__defs_8h.html#aa14d18f36837bc84ab727db4ca336e47">QEP_FLAG_IEL_EVENT</a></div><div class="ttdeci">#define QEP_FLAG_IEL_EVENT</div><div class="ttdef"><b>Definition:</b> qep_defs.h:21</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a588eb606d0a702ef5e865b1e19050862"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a588eb606d0a702ef5e865b1e19050862">FCL_cmplxCtrl_t::Kp</a></div><div class="ttdeci">float32_t Kp</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:29</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a2ddcdb79756958d3b8344e4b65773dc3"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a2ddcdb79756958d3b8344e4b65773dc3">_MOTOR_Vars_t_::pwmCompC</a></div><div class="ttdeci">volatile uint32_t * pwmCompC</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:350</div></div>
<div class="ttc" id="aipark_8h_html"><div class="ttname"><a href="ipark_8h.html">ipark.h</a></div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a020c57fb39c9ed98e449b5da792a844c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a020c57fb39c9ed98e449b5da792a844c">_MOTOR_Vars_t_::rg</a></div><div class="ttdeci">RAMPGEN rg</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:647</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a662b6fc9e7eb8168f7c8b6bf1139ea85"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a662b6fc9e7eb8168f7c8b6bf1139ea85">_MOTOR_Vars_t_::curB_PPBRESULT</a></div><div class="ttdeci">volatile uint32_t curB_PPBRESULT</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:353</div></div>
<div class="ttc" id="api_8h_html"><div class="ttname"><a href="pi_8h.html">pi.h</a></div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a03693ee60867b71719756e8ddf49eeb2"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a03693ee60867b71719756e8ddf49eeb2">_FCL_Parameters_t_::adcAlphaScale</a></div><div class="ttdeci">float32_t adcAlphaScale</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:86</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ad3bd0868e8bfd236c89b6f4bef429f64"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ad3bd0868e8bfd236c89b6f4bef429f64">_MOTOR_Vars_t_::pwmHalfPeriod</a></div><div class="ttdeci">float32_t pwmHalfPeriod</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:138</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a2a9f7e9514dc15cfa2a4de6196d25a17"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a2a9f7e9514dc15cfa2a4de6196d25a17">FCL_runQEPPosEstWrap</a></div><div class="ttdeci">static void FCL_runQEPPosEstWrap(MOTOR_Vars_t *pMotor)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:831</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a17258e83aa2fa5887b00b224a5fe720c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a17258e83aa2fa5887b00b224a5fe720c">_MOTOR_Vars_t_::speedLoopPrescaler</a></div><div class="ttdeci">uint16_t speedLoopPrescaler</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:385</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ac00e69bd392a25c54359b38aa9844737"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ac00e69bd392a25c54359b38aa9844737">_MOTOR_Vars_t_::focCycleCountMax</a></div><div class="ttdeci">uint16_t focCycleCountMax</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:685</div></div>
<div class="ttc" id="agroup___s_f_r_a_html_ga4611b605e45ab401f02cab15c5e38715"><div class="ttname"><a href="group___s_f_r_a.html#ga4611b605e45ab401f02cab15c5e38715">float32_t</a></div><div class="ttdeci">float float32_t</div><div class="ttdef"><b>Definition:</b> sfra_f32.h:42</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_ab5e498cff88581c624db21c5b5b2b74a"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#ab5e498cff88581c624db21c5b5b2b74a">_FCL_Parameters_t_::Rq</a></div><div class="ttdeci">float32_t Rq</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:82</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a6dab22e86090b6ddc3c3b86f31a01e84"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a6dab22e86090b6ddc3c3b86f31a01e84">_FCL_Parameters_t_::invZbase</a></div><div class="ttdeci">float32_t invZbase</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:87</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_ac23f930d98cad1bcd54769c68dcfd114"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#ac23f930d98cad1bcd54769c68dcfd114">FCL_cmplxCtrl_t::fbk</a></div><div class="ttdeci">float32_t fbk</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:25</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_aafc2f2eac6c8172a86c264561631accd"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#aafc2f2eac6c8172a86c264561631accd">_MOTOR_Vars_t_::posMechScaler</a></div><div class="ttdeci">float32_t posMechScaler</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:569</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ae51b6c69db92846be952c1ed356968ae"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ae51b6c69db92846be952c1ed356968ae">_MOTOR_Vars_t_::pwmUpdateMode</a></div><div class="ttdeci">PWMUpdateMode_e pwmUpdateMode</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:713</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_af3a94a02edbb3108be96434c09c94dd4"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#af3a94a02edbb3108be96434c09c94dd4">_FCL_Parameters_t_::Lq</a></div><div class="ttdeci">float32_t Lq</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:84</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_a366e7908e6f254f9d20a7445325ae053"><div class="ttname"><a href="struct___f_c_l___parameters__.html#a366e7908e6f254f9d20a7445325ae053">_FCL_Parameters_::BemfK</a></div><div class="ttdeci">float32_t BemfK</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:93</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a8b1595b6e4f862e27822774b316a5c95"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a8b1595b6e4f862e27822774b316a5c95">_MOTOR_Vars_t_::IdRefSet</a></div><div class="ttdeci">float32_t IdRefSet</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:578</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a3fd06a843ab41dc62e2cdc5ff1872700"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a3fd06a843ab41dc62e2cdc5ff1872700">_FCL_Parameters_t_::adcBetaScale</a></div><div class="ttdeci">float32_t adcBetaScale</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:87</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_a3d99ffd372594d3bb4cc3c13b9b83dd0"><div class="ttname"><a href="struct___f_c_l___parameters__.html#a3d99ffd372594d3bb4cc3c13b9b83dd0">_FCL_Parameters_::Rd</a></div><div class="ttdeci">float32_t Rd</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:84</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_abdbaa1ddd8222dc5b587dbc08d885cf1"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#abdbaa1ddd8222dc5b587dbc08d885cf1">_MOTOR_Vars_t_::tripCountDMC</a></div><div class="ttdeci">uint16_t tripCountDMC</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:399</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a2751dc4a2bdf5944909593a1a6e2dcd8"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a2751dc4a2bdf5944909593a1a6e2dcd8">_MOTOR_Vars_t_::speedObs</a></div><div class="ttdeci">SPD_OBSERVER speedObs</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:195</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a3fa286a9ddb9ea7195356e3b63363a73"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a3fa286a9ddb9ea7195356e3b63363a73">_MOTOR_Vars_t_::alignCntr</a></div><div class="ttdeci">uint16_t alignCntr</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:387</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_ae1b5fdb7b169e69232f0a914017c43f7"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#ae1b5fdb7b169e69232f0a914017c43f7">FCL_getSwVersion</a></div><div class="ttdeci">uint32_t FCL_getSwVersion(void)</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_abccc5a9ed5cd7c7d613a437bb7a41835"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#abccc5a9ed5cd7c7d613a437bb7a41835">_MOTOR_Vars_t_::pid_spd</a></div><div class="ttdeci">PID_CONTROLLER pid_spd</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:368</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_aa13752a50559a5325d9bdaa79f23d603"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#aa13752a50559a5325d9bdaa79f23d603">_MOTOR_Vars_t_::lsw2EntryFlag</a></div><div class="ttdeci">bool lsw2EntryFlag</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:407</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_a3e1a25dbad6128ce8e6d70016d74bd65"><div class="ttname"><a href="struct___f_c_l___parameters__.html#a3e1a25dbad6128ce8e6d70016d74bd65">_FCL_Parameters_::Ld</a></div><div class="ttdeci">float32_t Ld</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:86</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a49ed153f53d64abc0b458339eb197fde"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a49ed153f53d64abc0b458339eb197fde">_MOTOR_Vars_t_::drvClearFaultGPIO</a></div><div class="ttdeci">uint16_t drvClearFaultGPIO</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:397</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a2aa282d73ef95085086eb989feef0b47"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a2aa282d73ef95085086eb989feef0b47">_MOTOR_Vars_t_::volDC_PPBRESULT</a></div><div class="ttdeci">volatile uint32_t volDC_PPBRESULT</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:355</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a2d649a4cb60f9e55105c493243f4ec8e"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a2d649a4cb60f9e55105c493243f4ec8e">_MOTOR_Vars_t_::alignCnt</a></div><div class="ttdeci">uint16_t alignCnt</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:388</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a37013039d6e0ff1a42d153c6142f236b"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a37013039d6e0ff1a42d153c6142f236b">FCL_cmplxCtrl_t::xErr</a></div><div class="ttdeci">float32_t xErr</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:39</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a82496a8e99c798056d6afbc62dee458b"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a82496a8e99c798056d6afbc62dee458b">_MOTOR_Vars_t_::fclCycleCountMax</a></div><div class="ttdeci">uint16_t fclCycleCountMax</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:383</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a5e4438f4f3c7595d5a1baaaa3617366c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a5e4438f4f3c7595d5a1baaaa3617366c">_MOTOR_Vars_t_::pQEPRegs</a></div><div class="ttdeci">volatile struct EQEP_REGS * pQEPRegs</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:645</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a166cea21f53a830f598629a3b2df53e4"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a166cea21f53a830f598629a3b2df53e4">_FCL_Parameters_t_::BemfK</a></div><div class="ttdeci">float32_t BemfK</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:91</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a7efa7ba2c8b37ffd7aecb1c92bc3b8ab"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a7efa7ba2c8b37ffd7aecb1c92bc3b8ab">_MOTOR_Vars_t_::baseFreq</a></div><div class="ttdeci">float32_t baseFreq</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:311</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a68245838f1ded5d59ac17c2a1a679364"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a68245838f1ded5d59ac17c2a1a679364">_MOTOR_Vars_t_::curA_resultBase</a></div><div class="ttdeci">uint32_t curA_resultBase</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:221</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_af19370ac6d3f4ab35bd5665d763a1375"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#af19370ac6d3f4ab35bd5665d763a1375">_MOTOR_Vars_t_::pangle</a></div><div class="ttdeci">float32_t pangle</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:621</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a13dbe7c213d572dc435b1b8b2d7faf5f"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a13dbe7c213d572dc435b1b8b2d7faf5f">_MOTOR_Vars_t_::pi_pos</a></div><div class="ttdeci">PI_CONTROLLER pi_pos</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:367</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ab7206638dbdb9b9014125a282deb5093"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ab7206638dbdb9b9014125a282deb5093">_MOTOR_Vars_t_::IdRef_run</a></div><div class="ttdeci">float32_t IdRef_run</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:322</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a11a2443d16cad2b43cc2161b6f3cf115"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a11a2443d16cad2b43cc2161b6f3cf115">_MOTOR_Vars_t_::curC_PPBNumber</a></div><div class="ttdeci">ADC_PPBNumber curC_PPBNumber</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:232</div></div>
<div class="ttc" id="af28x__bmsk_8h_html_a0bfaee1c58c58e6380fef76a48171503"><div class="ttname"><a href="f28x__bmsk_8h.html#a0bfaee1c58c58e6380fef76a48171503">IEI_RISING</a></div><div class="ttdeci">#define IEI_RISING</div><div class="ttdef"><b>Definition:</b> f28x_bmsk.h:508</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a29ab66c4f667dcd4f0b6403cb1585045"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a29ab66c4f667dcd4f0b6403cb1585045">_MOTOR_Vars_t_::currentLimit</a></div><div class="ttdeci">float32_t currentLimit</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:318</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a4e522d8a4c6ab0828549b68f8ef3c44f"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a4e522d8a4c6ab0828549b68f8ef3c44f">FCL_cmplxCtrl_t::cosWTs</a></div><div class="ttdeci">float32_t cosWTs</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:35</div></div>
<div class="ttc" id="astruct___s_p_d___o_b_s_e_r_v_e_r__obj___html"><div class="ttname"><a href="struct___s_p_d___o_b_s_e_r_v_e_r__obj__.html">_SPD_OBSERVER_obj_</a></div><div class="ttdef"><b>Definition:</b> speed_observer.h:23</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a1af1c7b0a66974349d6fd944de88071d"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a1af1c7b0a66974349d6fd944de88071d">FCL_Parameters_t</a></div><div class="ttdeci">struct _FCL_Parameters_t_ FCL_Parameters_t</div><div class="ttdoc">typedefs for motorVars</div></div>
<div class="ttc" id="agroup___e_n_c_o_d_e_r_html_ga1a6dbac9d2aedd8fdb0436ffbe0a6d59a92e46e3ea5c542935595d0c8547a5cdd"><div class="ttname"><a href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59a92e46e3ea5c542935595d0c8547a5cdd">ENC_ALIGNMENT</a></div><div class="ttdef"><b>Definition:</b> encoder.h:89</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a72890bafa801cc569d9f40e0255946d2"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a72890bafa801cc569d9f40e0255946d2">_MOTOR_Vars_t_::speedWeObs</a></div><div class="ttdeci">float32_t speedWeObs</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:181</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a623ba289807fe13058841c5d18d5d597"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a623ba289807fe13058841c5d18d5d597">FCL_cmplxCtrl_t::expVal</a></div><div class="ttdeci">float32_t expVal</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:37</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html">FCL_cmplxCtrl_t</a></div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:22</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_aea2e5642ecbf4d0585c06ea0070c64b9"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#aea2e5642ecbf4d0585c06ea0070c64b9">_MOTOR_Vars_t_::pwmBaseU</a></div><div class="ttdeci">uint32_t pwmBaseU</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:630</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a45cca2674e2f2581ff555c1c0528820c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a45cca2674e2f2581ff555c1c0528820c">_MOTOR_Vars_t_::curA_PPBNumber</a></div><div class="ttdeci">ADC_PPBNumber curA_PPBNumber</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:230</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_aa134983f192e14a9b23e46c1790ed516"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#aa134983f192e14a9b23e46c1790ed516">_MOTOR_Vars_t_::IdRef_start</a></div><div class="ttdeci">float32_t IdRef_start</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:321</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a52a0434a8dced1faae6514c124b102d4"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a52a0434a8dced1faae6514c124b102d4">_MOTOR_Vars_t_::adcIntNumber</a></div><div class="ttdeci">ADC_IntNumber adcIntNumber</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:234</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a6e9cbdf3d9fbbbd524930d8518bd840b"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a6e9cbdf3d9fbbbd524930d8518bd840b">FCL_initQEP</a></div><div class="ttdeci">void FCL_initQEP(MOTOR_Vars_t *pMotor, const uint32_t qepBaseA)</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a50effb88c66f55e99a964f36b7b002e2"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a50effb88c66f55e99a964f36b7b002e2">_MOTOR_Vars_t_::focExecutionTime_us</a></div><div class="ttdeci">float32_t focExecutionTime_us</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:678</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a76de3008869a92eee20dad11a16ef11d"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a76de3008869a92eee20dad11a16ef11d">_MOTOR_Vars_t_::motorNum</a></div><div class="ttdeci">MotorNum_e motorNum</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:264</div></div>
<div class="ttc" id="aclarke_8h_html"><div class="ttname"><a href="clarke_8h.html">clarke.h</a></div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a4753bc1807218628d414505fe0ba6173"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a4753bc1807218628d414505fe0ba6173">FCL_cmplxCtrl_t::kDirect</a></div><div class="ttdeci">float32_t kDirect</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:38</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a2f517bb80c1622852ac21e05fb9dad77"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a2f517bb80c1622852ac21e05fb9dad77">_MOTOR_Vars_t_::cmplx_Id</a></div><div class="ttdeci">FCL_cmplxCtrl_t cmplx_Id</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:671</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a1a2b006bd11a044c35caa007ce4b7bab"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a1a2b006bd11a044c35caa007ce4b7bab">_MOTOR_Vars_t_::sfraEnableFlag</a></div><div class="ttdeci">bool sfraEnableFlag</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:409</div></div>
<div class="ttc" id="adevice_8h_html"><div class="ttname"><a href="device_8h.html">device.h</a></div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a0129d68b3e3fe7e66f784cd8753286d9"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a0129d68b3e3fe7e66f784cd8753286d9">_MOTOR_Vars_t_::positionRef</a></div><div class="ttdeci">float32_t positionRef</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:327</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a66ad035fb71ff831921535772af75857"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a66ad035fb71ff831921535772af75857">_MOTOR_Vars_t_::speedRefMax</a></div><div class="ttdeci">float32_t speedRefMax</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:577</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a7f27971e5dc5150d160de702cdcec7bc"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a7f27971e5dc5150d160de702cdcec7bc">_MOTOR_Vars_t_::ctrlIqRef</a></div><div class="ttdeci">float32_t ctrlIqRef</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:589</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_afce0140a63baa22eec66701951f5c166"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#afce0140a63baa22eec66701951f5c166">_MOTOR_Vars_t_::posPtr</a></div><div class="ttdeci">uint16_t posPtr</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:390</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_a0af7308b02df3cb4d9d35138eeeaedfa"><div class="ttname"><a href="struct___f_c_l___parameters__.html#a0af7308b02df3cb4d9d35138eeeaedfa">_FCL_Parameters_::carrierMid</a></div><div class="ttdeci">float32_t carrierMid</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:78</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_aff655645d1a624bdf6b49c2a79f4e8ed"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#aff655645d1a624bdf6b49c2a79f4e8ed">_MOTOR_Vars_t_::currentBs</a></div><div class="ttdeci">float32_t currentBs</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:336</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_afcee069e0093de32698a4ab948e5e297"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#afcee069e0093de32698a4ab948e5e297">_MOTOR_Vars_t_::currentInvSF</a></div><div class="ttdeci">float32_t currentInvSF</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:342</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html">_MOTOR_Vars_t_</a></div><div class="ttdoc">typedefs for motorVars</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:305</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a6d2637bcc268b11a455a0084244b24c5"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a6d2637bcc268b11a455a0084244b24c5">_MOTOR_Vars_t_::lsw1Speed</a></div><div class="ttdeci">float32_t lsw1Speed</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:328</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ae0c718f2a95b544d8ac4afa395746051"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ae0c718f2a95b544d8ac4afa395746051">_MOTOR_Vars_t_::offset_currentAs</a></div><div class="ttdeci">float32_t offset_currentAs</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:331</div></div>
<div class="ttc" id="amath_8h_html"><div class="ttname"><a href="math_8h.html">math.h</a></div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_af56e9c07682275c6b2b9c6c30557dbcd"><div class="ttname"><a href="struct___f_c_l___parameters__.html#af56e9c07682275c6b2b9c6c30557dbcd">_FCL_Parameters_::Lq</a></div><div class="ttdeci">float32_t Lq</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:87</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_aefa83f67f0ba09e969a4351b4a143f39"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#aefa83f67f0ba09e969a4351b4a143f39">FCL_cmplxCtrl_t::Umax</a></div><div class="ttdeci">float32_t Umax</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:33</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a0e63b6fe1f12e07317335563b65a4da5"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a0e63b6fe1f12e07317335563b65a4da5">_MOTOR_Vars_t_::IdRef</a></div><div class="ttdeci">float32_t IdRef</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:323</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a1776ba127e58a6c8291766064f29a5e1"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a1776ba127e58a6c8291766064f29a5e1">_MOTOR_Vars_t_::offsetDoneFlag</a></div><div class="ttdeci">bool offsetDoneFlag</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:408</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_adf10d8bf710c45932b29a0082cba4da7"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#adf10d8bf710c45932b29a0082cba4da7">_MOTOR_Vars_t_::park</a></div><div class="ttdeci">PARK park</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:362</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_a7ec25f0bc960cf359be008dcdaa8b5c7"><div class="ttname"><a href="struct___f_c_l___parameters__.html#a7ec25f0bc960cf359be008dcdaa8b5c7">_FCL_Parameters_::Rq</a></div><div class="ttdeci">float32_t Rq</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:85</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ab51fea639f3ef89eaeab2bd89619a2b3"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ab51fea639f3ef89eaeab2bd89619a2b3">_MOTOR_Vars_t_::currentCs</a></div><div class="ttdeci">float32_t currentCs</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:337</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a4ec1d02e9cc666364f56dd260bc41488"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a4ec1d02e9cc666364f56dd260bc41488">_MOTOR_Vars_t_::curC_resultBase</a></div><div class="ttdeci">uint32_t curC_resultBase</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:223</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_aa921fb7b4b243bc292bc65915f2f93cc"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#aa921fb7b4b243bc292bc65915f2f93cc">_FCL_Parameters_t_::wccQ</a></div><div class="ttdeci">float32_t wccQ</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:89</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_aed2829a0bf4280737a7e1da286e9c3dc"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#aed2829a0bf4280737a7e1da286e9c3dc">_MOTOR_Vars_t_::rc</a></div><div class="ttdeci">RMPCNTL rc</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:359</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a05e077d39b593c697c7b257bce2a03ba"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a05e077d39b593c697c7b257bce2a03ba">_MOTOR_Vars_t_::voltageLimit</a></div><div class="ttdeci">float32_t voltageLimit</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:317</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_af9770f40b8e0f6f19b1be33f8c585c74"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#af9770f40b8e0f6f19b1be33f8c585c74">_FCL_Parameters_t_::Vdcbus</a></div><div class="ttdeci">float32_t Vdcbus</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:90</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_aad55bad7a1dd50005a02c9724622d638"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#aad55bad7a1dd50005a02c9724622d638">_FCL_Parameters_t_::Ld</a></div><div class="ttdeci">float32_t Ld</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:83</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_af7bbc238ee8df4b479510fa34b9e46f8"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#af7bbc238ee8df4b479510fa34b9e46f8">_MOTOR_Vars_t_::IqRef_start</a></div><div class="ttdeci">float32_t IqRef_start</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:597</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a1269922a1b76bfaa4d0748a55ff8c467"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a1269922a1b76bfaa4d0748a55ff8c467">FCL_cmplxCtrl_t::Umin</a></div><div class="ttdeci">float32_t Umin</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:34</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a684a392bc540ef74e8fd3e39e2f8e33e"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a684a392bc540ef74e8fd3e39e2f8e33e">_MOTOR_Vars_t_::curB_PPBNumber</a></div><div class="ttdeci">ADC_PPBNumber curB_PPBNumber</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:231</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a0e84e0d1af6515d3d87fc31d8f604f67"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a0e84e0d1af6515d3d87fc31d8f604f67">_FCL_Parameters_t_::Wbase</a></div><div class="ttdeci">float32_t Wbase</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:92</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a33ba8fcb5a8db4e28a7a2bb12eb957f4"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a33ba8fcb5a8db4e28a7a2bb12eb957f4">_FCL_Parameters_t_::wccD</a></div><div class="ttdeci">float32_t wccD</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:88</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ae2c4a640bb3723a510bd6b52bc3f2908"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ae2c4a640bb3723a510bd6b52bc3f2908">_MOTOR_Vars_t_::posPtrMax</a></div><div class="ttdeci">uint16_t posPtrMax</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:389</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_acc412ecbdee8b746a0ecd919440191d9"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#acc412ecbdee8b746a0ecd919440191d9">_MOTOR_Vars_t_::speedWePrev</a></div><div class="ttdeci">float32_t speedWePrev</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:620</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a21d3ece8abbf8b128f90f247723eafbb"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a21d3ece8abbf8b128f90f247723eafbb">_MOTOR_Vars_t_::fclUpdateLatency_us</a></div><div class="ttdeci">float32_t fclUpdateLatency_us</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:677</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a6f2d1e4514b301d0684d364cb32014b1"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a6f2d1e4514b301d0684d364cb32014b1">_MOTOR_Vars_t_::lsw</a></div><div class="ttdeci">ENC_Status_e lsw</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:717</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a892cb7440364883a362f3298881f3183"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a892cb7440364883a362f3298881f3183">_MOTOR_Vars_t_::polePairs</a></div><div class="ttdeci">float32_t polePairs</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:568</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a0ddf05471bb547490b420d38f408d276"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a0ddf05471bb547490b420d38f408d276">_MOTOR_Vars_t_::speedRef</a></div><div class="ttdeci">float32_t speedRef</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:326</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a3946776ccea695f415bea761a8992355"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a3946776ccea695f415bea761a8992355">_MOTOR_Vars_t_::currentThreshLo</a></div><div class="ttdeci">uint16_t currentThreshLo</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:393</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a3f84b1976825531653cd6fcf143deb10"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a3f84b1976825531653cd6fcf143deb10">FCL_cmplxCtrl_t::Ki</a></div><div class="ttdeci">float32_t Ki</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:30</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a766757da8bfb3ffc0fc545adbcd54868"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a766757da8bfb3ffc0fc545adbcd54868">FCL_cmplxCtrl_t::out</a></div><div class="ttdeci">float32_t out</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:27</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_a224b151be11bd9e7eaa9f39ab2478eba"><div class="ttname"><a href="struct___f_c_l___parameters__.html#a224b151be11bd9e7eaa9f39ab2478eba">_FCL_Parameters_::wccQ</a></div><div class="ttdeci">float32_t wccQ</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:91</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_a8f5d75a54efb29a98c421a4d13540569"><div class="ttname"><a href="struct___f_c_l___parameters__.html#a8f5d75a54efb29a98c421a4d13540569">_FCL_Parameters_::wccD</a></div><div class="ttdeci">float32_t wccD</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:90</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ab76a972ea7ddfdc51496d314c33ab103"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ab76a972ea7ddfdc51496d314c33ab103">_MOTOR_Vars_t_::ipark</a></div><div class="ttdeci">IPARK ipark</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:363</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_ad11bfc14e582ae2107e0d789652e1553"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#ad11bfc14e582ae2107e0d789652e1553">_FCL_Parameters_t_::Rd</a></div><div class="ttdeci">float32_t Rd</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:81</div></div>
<div class="ttc" id="aqep__defs_8h_html"><div class="ttname"><a href="qep__defs_8h.html">qep_defs.h</a></div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a744da92911cfb6d400af071fc93b6750"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a744da92911cfb6d400af071fc93b6750">_MOTOR_Vars_t_::svgen</a></div><div class="ttdeci">SVGEN svgen</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:373</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a262047d93094a29f2a0d6dd6187c753c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a262047d93094a29f2a0d6dd6187c753c">_MOTOR_Vars_t_::currentAs</a></div><div class="ttdeci">float32_t currentAs</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:335</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a4095fa177f9de5fb8369741c97c06709"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a4095fa177f9de5fb8369741c97c06709">_MOTOR_Vars_t_::fclClrCntr</a></div><div class="ttdeci">uint16_t fclClrCntr</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:382</div></div>
<div class="ttc" id="aqep__defs_8h_html_ac2ac58a8a1df52e5867fd5de3ef8355a"><div class="ttname"><a href="qep__defs_8h.html#ac2ac58a8a1df52e5867fd5de3ef8355a">QEP_FLAG_UTO_EVENT</a></div><div class="ttdeci">#define QEP_FLAG_UTO_EVENT</div><div class="ttdef"><b>Definition:</b> qep_defs.h:22</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a1af0134e4a16db9dfe1c7de53329bab8"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a1af0134e4a16db9dfe1c7de53329bab8">FCL_cmplxCtrl_t::sinWTs</a></div><div class="ttdeci">float32_t sinWTs</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:36</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a2f70d2851e255556a6bc5eb5b3760fba"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a2f70d2851e255556a6bc5eb5b3760fba">_MOTOR_Vars_t_::focClrCntr</a></div><div class="ttdeci">uint16_t focClrCntr</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:684</div></div>
<div class="ttc" id="agroup___e_n_c_o_d_e_r_html_ga1a6dbac9d2aedd8fdb0436ffbe0a6d59"><div class="ttname"><a href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59">ENC_Status_e</a></div><div class="ttdeci">ENC_Status_e</div><div class="ttdef"><b>Definition:</b> encoder.h:86</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a3f25a6f1fe14f1a89dcbd1f9f6e34e15"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a3f25a6f1fe14f1a89dcbd1f9f6e34e15">_FCL_Parameters_t_::adcPPBScale</a></div><div class="ttdeci">float32_t adcPPBScale</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:77</div></div>
<div class="ttc" id="afcl__cmplx__ctrl_8h_html"><div class="ttname"><a href="fcl__cmplx__ctrl_8h.html">fcl_cmplx_ctrl.h</a></div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_afe5bac8e042970eedf4e36f4f657e2aa"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#afe5bac8e042970eedf4e36f4f657e2aa">_MOTOR_Vars_t_::IqRefSet</a></div><div class="ttdeci">float32_t IqRefSet</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:579</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a69191886d2a005822e02b4e0fe8bbcc0"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a69191886d2a005822e02b4e0fe8bbcc0">FCL_initPWM</a></div><div class="ttdeci">void FCL_initPWM(MOTOR_Vars_t *pMotor, const uint32_t pwmBaseU, const uint32_t pwmBaseV, const uint32_t pwmBaseW)</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a8f24161cb80415bcc6da7200c6ace6a7"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a8f24161cb80415bcc6da7200c6ace6a7">FCL_cmplxCtrl_t::KerrOld</a></div><div class="ttdeci">float32_t KerrOld</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:32</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a80ab64ff0d35c73729594376dcd95e23"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a80ab64ff0d35c73729594376dcd95e23">_MOTOR_Vars_t_::ctrlState</a></div><div class="ttdeci">CtrlState_e ctrlState</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:404</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_afa80ecf4ae7e91ad15efdeef9ddb9c97"><div class="ttname"><a href="struct___f_c_l___parameters__.html#afa80ecf4ae7e91ad15efdeef9ddb9c97">_FCL_Parameters_::Vdcbus</a></div><div class="ttdeci">float32_t Vdcbus</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:92</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_af30442d8b566aab98c9ba3688decd950"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#af30442d8b566aab98c9ba3688decd950">_MOTOR_Vars_t_::adcScale</a></div><div class="ttdeci">float32_t adcScale</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:341</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_afcdef15cac71d20db8eff8e3999cfb9c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#afcdef15cac71d20db8eff8e3999cfb9c">_MOTOR_Vars_t_::posCntr</a></div><div class="ttdeci">uint32_t posCntr</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:307</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a1b6faf8ea1d38d053653635a8a9ddb92"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a1b6faf8ea1d38d053653635a8a9ddb92">_MOTOR_Vars_t_::posCntrMax</a></div><div class="ttdeci">uint32_t posCntrMax</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:308</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a0367d29b1a91b56536397ac865f98856"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a0367d29b1a91b56536397ac865f98856">_MOTOR_Vars_t_::clarke</a></div><div class="ttdeci">CLARKE clarke</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:361</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a3b1a8649487934f56651a9fc7f19cd73"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a3b1a8649487934f56651a9fc7f19cd73">_FCL_Parameters_t_::carrierMid</a></div><div class="ttdeci">float32_t carrierMid</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:76</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ab9f8b59ad3689f2d9efd8f9c6b329c42"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ab9f8b59ad3689f2d9efd8f9c6b329c42">_MOTOR_Vars_t_::drvEnableGateGPIO</a></div><div class="ttdeci">uint16_t drvEnableGateGPIO</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:395</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_af520387b3f3661a8140e1735697fe3d7"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#af520387b3f3661a8140e1735697fe3d7">motorVars</a></div><div class="ttdeci">MOTOR_Vars_t motorVars[2]</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a19158b21b751391324f75695b5601e27"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a19158b21b751391324f75695b5601e27">_MOTOR_Vars_t_::drvFaultTripGPIO</a></div><div class="ttdeci">uint16_t drvFaultTripGPIO</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:396</div></div>
<div class="ttc" id="apark_8h_html"><div class="ttname"><a href="park_8h.html">park.h</a></div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_acd32e8b0909418c089ba99c8cb75de35"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#acd32e8b0909418c089ba99c8cb75de35">_MOTOR_Vars_t_::currentThreshHi</a></div><div class="ttdeci">uint16_t currentThreshHi</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:392</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ad1980f6d7e2ef79909f778496c21140c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ad1980f6d7e2ef79909f778496c21140c">_MOTOR_Vars_t_::Vdcbus</a></div><div class="ttdeci">float32_t Vdcbus</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:375</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a164b5d6abbabf3e7cb0662e19d9527b6"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a164b5d6abbabf3e7cb0662e19d9527b6">_MOTOR_Vars_t_::speedWe</a></div><div class="ttdeci">float32_t speedWe</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:619</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_aa0f41c5cd33e3769269a00fac950c82c"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#aa0f41c5cd33e3769269a00fac950c82c">FCL_readCount</a></div><div class="ttdeci">static void FCL_readCount(MOTOR_Vars_t *pMotor)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:302</div></div>
<div class="ttc" id="agroup___e_n_c_o_d_e_r_html_ga1a6dbac9d2aedd8fdb0436ffbe0a6d59abdd7f3da586206202a4afd81c9a7b82b"><div class="ttname"><a href="group___e_n_c_o_d_e_r.html#ga1a6dbac9d2aedd8fdb0436ffbe0a6d59abdd7f3da586206202a4afd81c9a7b82b">ENC_WAIT_FOR_INDEX</a></div><div class="ttdef"><b>Definition:</b> encoder.h:90</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_aa27a417ba1e5539be140cc8228d0746d"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#aa27a417ba1e5539be140cc8228d0746d">_FCL_Parameters_t_::cmidsqrt3</a></div><div class="ttdeci">float32_t cmidsqrt3</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:78</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a0b772d5c3dc1791ae82c679b2d243e04"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a0b772d5c3dc1791ae82c679b2d243e04">_MOTOR_Vars_t_::VdcbusMax</a></div><div class="ttdeci">float32_t VdcbusMax</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:376</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a4a2b45ed2d7f6c79e742c5b0e30b5fc5"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a4a2b45ed2d7f6c79e742c5b0e30b5fc5">_MOTOR_Vars_t_::pwmBaseV</a></div><div class="ttdeci">uint32_t pwmBaseV</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:631</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a133da4fd449172d6c6733bd2aa3a576c"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a133da4fd449172d6c6733bd2aa3a576c">FCL_initADC_3In</a></div><div class="ttdeci">void FCL_initADC_3In(MOTOR_Vars_t *pMotor, uint32_t adcBaseW, const uint32_t adcResultBaseU, ADC_PPBNumber adcU_PPBNum, const uint32_t adcResultBaseV, ADC_PPBNumber adcV_PPBNum, const uint32_t adcResultBaseW, ADC_PPBNumber adcW_PPBNum)</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a6b1c2a05cf030a2ee30ebe949bf8762a"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a6b1c2a05cf030a2ee30ebe949bf8762a">_MOTOR_Vars_t_::isrTicker</a></div><div class="ttdeci">uint32_t isrTicker</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:379</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a7c0b643e9f43bf8f690a00f8c3f9c508"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a7c0b643e9f43bf8f690a00f8c3f9c508">_MOTOR_Vars_t_::speedLoopCount</a></div><div class="ttdeci">uint16_t speedLoopCount</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:386</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a351feb2cc07281068c91ec4c47abbcac"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a351feb2cc07281068c91ec4c47abbcac">_MOTOR_Vars_t_::posSlewRate</a></div><div class="ttdeci">float32_t posSlewRate</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:309</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a668e1ce8239d79eb082ad2aa8c442bb6"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a668e1ce8239d79eb082ad2aa8c442bb6">_MOTOR_Vars_t_::curA_PPBRESULT</a></div><div class="ttdeci">volatile uint32_t curA_PPBRESULT</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:352</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a968d29bafa7f51ff257e03b0f26ff8c5"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a968d29bafa7f51ff257e03b0f26ff8c5">_MOTOR_Vars_t_::offset_currentBs</a></div><div class="ttdeci">float32_t offset_currentBs</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:332</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html"><div class="ttname"><a href="struct___f_c_l___parameters__.html">_FCL_Parameters_</a></div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:77</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a825f266f790c7dc2b3953a9765c2b8bf"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a825f266f790c7dc2b3953a9765c2b8bf">_MOTOR_Vars_t_::pADCIntFlag</a></div><div class="ttdeci">volatile union ADCINTFLG_REG * pADCIntFlag</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:644</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a0e9423f650c97b2414f50ae9f71bd570"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a0e9423f650c97b2414f50ae9f71bd570">FCL_runComplexCtrlWrap</a></div><div class="ttdeci">static void FCL_runComplexCtrlWrap(MOTOR_Vars_t *pMotor)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:588</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a898387a736ec1cfff35524ee7bdb427c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a898387a736ec1cfff35524ee7bdb427c">_MOTOR_Vars_t_::speed</a></div><div class="ttdeci">SPEED_MEAS_QEP speed</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:364</div></div>
<div class="ttc" id="asvgen_8h_html"><div class="ttname"><a href="svgen_8h.html">svgen.h</a></div></div>
<div class="ttc" id="agroup___u_s_e_r_p_a_r_a_m_s_html_ga8109fab3f1b7f65d6dcffcb619664f46"><div class="ttname"><a href="group___u_s_e_r_p_a_r_a_m_s.html#ga8109fab3f1b7f65d6dcffcb619664f46">MotorNum_e</a></div><div class="ttdeci">MotorNum_e</div><div class="ttdoc">Enumeration for the Motor numbers.</div><div class="ttdef"><b>Definition:</b> include/userParams.h:86</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_aaff557896b5567eb453d4ac6ddf28ed7"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#aaff557896b5567eb453d4ac6ddf28ed7">_MOTOR_Vars_t_::fclCycleCount</a></div><div class="ttdeci">uint16_t fclCycleCount</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:682</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ae21502cbbba9a9a913da7ba2bbfd3c8c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ae21502cbbba9a9a913da7ba2bbfd3c8c">_MOTOR_Vars_t_::runMotor</a></div><div class="ttdeci">MotorRunStop_e runMotor</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:403</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ab2d6b2e8e15685ccfa749af2955cbb89"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ab2d6b2e8e15685ccfa749af2955cbb89">_MOTOR_Vars_t_::VdcbusMin</a></div><div class="ttdeci">float32_t VdcbusMin</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:377</div></div>
<div class="ttc" id="af28x__bmsk_8h_html"><div class="ttname"><a href="f28x__bmsk_8h.html">f28x_bmsk.h</a></div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_ab3361669cbeac3a05681f954bcf0ae57"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#ab3361669cbeac3a05681f954bcf0ae57">MOTOR_Vars_t</a></div><div class="ttdeci">struct _MOTOR_Vars_t_ MOTOR_Vars_t</div><div class="ttdoc">typedefs for motorVars</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_aa06068b8d1916927176ccbd4c5780808"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#aa06068b8d1916927176ccbd4c5780808">EQEP_POSCNT_INIT_RISING_EDGE</a></div><div class="ttdeci">#define EQEP_POSCNT_INIT_RISING_EDGE</div><div class="ttdoc">poscnt=posinit @ QEPI rise</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:752</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a1835029652f78a2aab1035b02aac5505"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a1835029652f78a2aab1035b02aac5505">_MOTOR_Vars_t_::posMechTheta</a></div><div class="ttdeci">float32_t posMechTheta</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:346</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a9698b2d968e1d75514acfdad8937d271"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a9698b2d968e1d75514acfdad8937d271">_MOTOR_Vars_t_::IqRef</a></div><div class="ttdeci">float32_t IqRef</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:324</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a60908feec0afee75bc323fa95447f14d"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a60908feec0afee75bc323fa95447f14d">_MOTOR_Vars_t_::Ts</a></div><div class="ttdeci">float32_t Ts</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:314</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_aea4f2a415443562ae8911463bc08f4f5"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#aea4f2a415443562ae8911463bc08f4f5">FCL_initADC_2In</a></div><div class="ttdeci">void FCL_initADC_2In(MOTOR_Vars_t *pMotor, uint32_t adcBaseW, const uint32_t adcResultBaseV, ADC_PPBNumber adcV_PPBNum, const uint32_t adcResultBaseW, ADC_PPBNumber adcW_PPBNum)</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_af303e661a1e9246a8c94cf47a5978f28"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#af303e661a1e9246a8c94cf47a5978f28">_MOTOR_Vars_t_::maxModIndex</a></div><div class="ttdeci">float32_t maxModIndex</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:315</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a79a8d423d1134dd6d39ddb46e8a583cb"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a79a8d423d1134dd6d39ddb46e8a583cb">_MOTOR_Vars_t_::voltageScale</a></div><div class="ttdeci">float32_t voltageScale</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:340</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a4959ae6c555c13c0460a6e5fc6515b1c"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a4959ae6c555c13c0460a6e5fc6515b1c">_MOTOR_Vars_t_::focCycleCount</a></div><div class="ttdeci">uint16_t focCycleCount</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:686</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a44b339387041afdcd158c517bfb11d75"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a44b339387041afdcd158c517bfb11d75">FCL_runPICtrlWrap</a></div><div class="ttdeci">static void FCL_runPICtrlWrap(MOTOR_Vars_t *pMotor)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:447</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ad6e32f9c21d7d0e76592b42909947450"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ad6e32f9c21d7d0e76592b42909947450">_MOTOR_Vars_t_::offset_currentCs</a></div><div class="ttdeci">float32_t offset_currentCs</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:333</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a2c0ca78345d91bd859fa5c30acf11928"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a2c0ca78345d91bd859fa5c30acf11928">FCL_resetController</a></div><div class="ttdeci">static void FCL_resetController(MOTOR_Vars_t *pMotor)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:313</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ad72bf041ee64e19f22d1e632926f6efa"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ad72bf041ee64e19f22d1e632926f6efa">_MOTOR_Vars_t_::clearTripFlagDMC</a></div><div class="ttdeci">bool clearTripFlagDMC</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:406</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_ab311cd432596e49ca87a85d117bcbfdb"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#ab311cd432596e49ca87a85d117bcbfdb">_MOTOR_Vars_t_::tripFlagDMC</a></div><div class="ttdeci">uint16_t tripFlagDMC</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:400</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a0ffede439e517c280b4caa6a096d92d8"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a0ffede439e517c280b4caa6a096d92d8">_MOTOR_Vars_t_::cmplx_Iq</a></div><div class="ttdeci">FCL_cmplxCtrl_t cmplx_Iq</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:672</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_afc9095bc2190f53c771e448b8658e225"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#afc9095bc2190f53c771e448b8658e225">_FCL_Parameters_t_::tSamp</a></div><div class="ttdeci">float32_t tSamp</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:80</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a86561cc9290acfdb9b8b170bc147f028"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a86561cc9290acfdb9b8b170bc147f028">_MOTOR_Vars_t_::curB_resultBase</a></div><div class="ttdeci">uint32_t curB_resultBase</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:222</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a5aa830b8ba2bcfeea4f906313dd65ae6"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a5aa830b8ba2bcfeea4f906313dd65ae6">_MOTOR_Vars_t_::speedRefStart</a></div><div class="ttdeci">float32_t speedRefStart</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:576</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a068cf049323b7fa745065394ee183b6e"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a068cf049323b7fa745065394ee183b6e">_MOTOR_Vars_t_::adcBaseW</a></div><div class="ttdeci">uint32_t adcBaseW</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:633</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a553ac6dd18a720e676d506fd21165768"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a553ac6dd18a720e676d506fd21165768">_FCL_Parameters_t_::Ibase</a></div><div class="ttdeci">float32_t Ibase</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:86</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a0f5858ff7aded1c5ac147a520c568cc8"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a0f5858ff7aded1c5ac147a520c568cc8">_MOTOR_Vars_t_::currentScale</a></div><div class="ttdeci">float32_t currentScale</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:339</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a9e2695aca83b03674011c0067079f32d"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a9e2695aca83b03674011c0067079f32d">EQEP_POSCNT_INIT_NOTHING</a></div><div class="ttdeci">#define EQEP_POSCNT_INIT_NOTHING</div><div class="ttdoc">No action.</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:751</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_ac8721efc6f8b553083343daa311c70dd"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#ac8721efc6f8b553083343daa311c70dd">EQEP_resetPoscnt</a></div><div class="ttdeci">static void EQEP_resetPoscnt(uint32_t base, uint16_t initMode)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:755</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a1234c2ed13621d046910a5920962eda3"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a1234c2ed13621d046910a5920962eda3">FCL_runPICtrl</a></div><div class="ttdeci">static void FCL_runPICtrl(MOTOR_Vars_t *pMotor)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:369</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a3c7e7862ca5ac8bdd487080e9056aec7"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a3c7e7862ca5ac8bdd487080e9056aec7">_MOTOR_Vars_t_::curC_PPBRESULT</a></div><div class="ttdeci">volatile uint32_t curC_PPBRESULT</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:354</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a833b27c5ffcbb7c79db73afb133a48ae"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a833b27c5ffcbb7c79db73afb133a48ae">_MOTOR_Vars_t_::ctrlIdRef</a></div><div class="ttdeci">float32_t ctrlIdRef</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:588</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a7f9595c15bfe1564fc4b8f633ef202a1"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a7f9595c15bfe1564fc4b8f633ef202a1">FCL_runPI</a></div><div class="ttdeci">static void FCL_runPI(FCL_cmplxCtrl_t *pPI)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:337</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a7d10d2b3c3c6b1c1124b6dfeef6434a8"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a7d10d2b3c3c6b1c1124b6dfeef6434a8">_MOTOR_Vars_t_::voltageInvSF</a></div><div class="ttdeci">float32_t voltageInvSF</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:343</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_a94bdee75ce69046fc699fa2a1e78686e"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#a94bdee75ce69046fc699fa2a1e78686e">FCL_runQEPPosEst</a></div><div class="ttdeci">static void FCL_runQEPPosEst(MOTOR_Vars_t *pMotor)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:772</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html_a4ebc42f0f741901dd1315de252656f72"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html#a4ebc42f0f741901dd1315de252656f72">_FCL_Parameters_t_::Vbase</a></div><div class="ttdeci">float32_t Vbase</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:85</div></div>
<div class="ttc" id="afcl__foc__cpu__dm_8h_html_ac3999b73d65218a5a617d0b07dbbb6d0"><div class="ttname"><a href="fcl__foc__cpu__dm_8h.html#ac3999b73d65218a5a617d0b07dbbb6d0">FCL_runComplexCtrl</a></div><div class="ttdeci">static void FCL_runComplexCtrl(MOTOR_Vars_t *pMotor)</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu_dm.h:509</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_af15911e26f3e6f472c09c400a80c8077"><div class="ttname"><a href="struct___f_c_l___parameters__.html#af15911e26f3e6f472c09c400a80c8077">_FCL_Parameters_::tSamp</a></div><div class="ttdeci">float32_t tSamp</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:83</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_a8c70a4519752e26f2a21ae8fc4becad2"><div class="ttname"><a href="struct___f_c_l___parameters__.html#a8c70a4519752e26f2a21ae8fc4becad2">_FCL_Parameters_::Ibase</a></div><div class="ttdeci">float32_t Ibase</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:89</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_a0b3e67e0e07cda2068bc3ca1b0d85c6e"><div class="ttname"><a href="struct___f_c_l___parameters__.html#a0b3e67e0e07cda2068bc3ca1b0d85c6e">_FCL_Parameters_::cmidsqrt3</a></div><div class="ttdeci">float32_t cmidsqrt3</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:81</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_a392c5cdb8c14d4f273928790c34c0e4f"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#a392c5cdb8c14d4f273928790c34c0e4f">FCL_cmplxCtrl_t::carryOver</a></div><div class="ttdeci">float32_t carryOver</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:28</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a87c329579423217bb717df650debfd64"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a87c329579423217bb717df650debfd64">_MOTOR_Vars_t_::pwmBaseW</a></div><div class="ttdeci">uint32_t pwmBaseW</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:632</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a8a58c061f9a116e8bf1af840386237e2"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a8a58c061f9a116e8bf1af840386237e2">_MOTOR_Vars_t_::pwmCompB</a></div><div class="ttdeci">volatile uint32_t * pwmCompB</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:349</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_aa8dab02cc22806900416b767f29fa20e"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#aa8dab02cc22806900416b767f29fa20e">_MOTOR_Vars_t_::posElecTheta</a></div><div class="ttdeci">float32_t posElecTheta</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:345</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_aab331e25d82c3681332947e0c04b055d"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#aab331e25d82c3681332947e0c04b055d">FCL_cmplxCtrl_t::err</a></div><div class="ttdeci">float32_t err</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:26</div></div>
<div class="ttc" id="astruct_f_c_l__cmplx_ctrl__t_html_ad4fbe5e18271fb101f47f8ef978c8370"><div class="ttname"><a href="struct_f_c_l__cmplx_ctrl__t.html#ad4fbe5e18271fb101f47f8ef978c8370">FCL_cmplxCtrl_t::Kerr</a></div><div class="ttdeci">float32_t Kerr</div><div class="ttdef"><b>Definition:</b> fcl_cmplx_ctrl.h:31</div></div>
<div class="ttc" id="astruct___f_c_l___parameters___html_ab967dfcdf01990843aca96c739d7e612"><div class="ttname"><a href="struct___f_c_l___parameters__.html#ab967dfcdf01990843aca96c739d7e612">_FCL_Parameters_::Wbase</a></div><div class="ttdeci">float32_t Wbase</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla.h:94</div></div>
<div class="ttc" id="astruct___f_c_l___parameters__t___html"><div class="ttname"><a href="struct___f_c_l___parameters__t__.html">_FCL_Parameters_t_</a></div><div class="ttdoc">typedefs for motorVars</div><div class="ttdef"><b>Definition:</b> fcl_foc_cpu.h:74</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a4d4f20bef25ac8eeeb6d45de0afff925"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a4d4f20bef25ac8eeeb6d45de0afff925">_MOTOR_Vars_t_::tripFlagPrev</a></div><div class="ttdeci">uint16_t tripFlagPrev</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:401</div></div>
<div class="ttc" id="astruct___m_o_t_o_r___vars__t___html_a32b61c57873406b00e59eef80c83e650"><div class="ttname"><a href="struct___m_o_t_o_r___vars__t__.html#a32b61c57873406b00e59eef80c83e650">_MOTOR_Vars_t_::FCL_params</a></div><div class="ttdeci">FCL_Parameters_t FCL_params</div><div class="ttdef"><b>Definition:</b> fcl_cpu_cla_dm.h:370</div></div>
<hr size="1" /><small>
Copyright  2021, Texas Instruments Incorporated</small>
</body>
</html>
